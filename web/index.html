<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Try Elo</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body data-controller="tabs">
  <header>
    <a href="#home" class="logo" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="home">Elo â€” An expression language</a>
    <button class="mobile-menu-toggle" data-action="click->tabs#toggleMobileMenu" aria-label="Toggle menu">
      <span class="hamburger-icon"></span>
    </button>
    <nav data-tabs-target="nav">
      <a href="#home" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="home" class="active">Home</a>
      <a href="#try" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="try">Try</a>
      <a href="#learn" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="learn">Learn</a>
      <div class="nav-group">
        <a href="#doc" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="doc">Reference</a>
        <div class="nav-submenu">
          <span class="submenu-section">Language</span>
          <a href="#doc/getting-started" data-action="click->tabs#switch" data-tab="doc">Getting Started</a>
          <a href="#doc/types" data-action="click->tabs#switch" data-tab="doc">Types</a>
          <a href="#doc/literals" data-action="click->tabs#switch" data-tab="doc">Literals</a>
          <a href="#doc/objects" data-action="click->tabs#switch" data-tab="doc">Objects</a>
          <a href="#doc/operators" data-action="click->tabs#switch" data-tab="doc">Operators</a>
          <a href="#doc/variables" data-action="click->tabs#switch" data-tab="doc">Variables</a>
          <a href="#doc/conditionals" data-action="click->tabs#switch" data-tab="doc">Conditionals</a>
          <a href="#doc/lambdas" data-action="click->tabs#switch" data-tab="doc">Lambdas</a>
          <a href="#doc/ranges" data-action="click->tabs#switch" data-tab="doc">Ranges</a>
          <a href="#doc/type-selectors" data-action="click->tabs#switch" data-tab="doc">Type Selectors</a>
          <a href="#doc/assertions" data-action="click->tabs#switch" data-tab="doc">Assertions</a>
          <span class="submenu-section">Tools</span>
          <a href="#doc/examples" data-action="click->tabs#switch" data-tab="doc">Examples</a>
          <a href="#doc/javascript-api" data-action="click->tabs#switch" data-tab="doc">JavaScript API</a>
          <a href="#doc/command-line" data-action="click->tabs#switch" data-tab="doc">Command Line</a>
        </div>
      </div>
      <div class="nav-group">
        <a href="#stdlib" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="stdlib">Stdlib</a>
        <div class="nav-submenu">
          <a href="#stdlib/stdlib-numeric" data-action="click->tabs#switch" data-tab="stdlib">Numeric</a>
          <a href="#stdlib/stdlib-temporal" data-action="click->tabs#switch" data-tab="stdlib">Temporal</a>
          <a href="#stdlib/stdlib-string" data-action="click->tabs#switch" data-tab="stdlib">String</a>
          <a href="#stdlib/stdlib-introspection" data-action="click->tabs#switch" data-tab="stdlib">Introspection</a>
          <a href="#stdlib/stdlib-type-selectors" data-action="click->tabs#switch" data-tab="stdlib">Type Selectors</a>
        </div>
      </div>
      <a href="#blog" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="blog">Blog</a>
      <a href="#about" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="about">About</a>
      <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme" title="Toggle light/dark mode">
        <span class="theme-icon">&#9790;</span>
      </button>
    </nav>
  </header>

  <!-- Home Panel (Landing Page) -->
  <main data-tabs-target="panel" data-panel="home" class="home-panel" data-controller="doc">
    <div class="home-content">
      <section class="hero">
        <h1>The Elo Language</h1>
        <p class="tagline">A simple, well-designed, portable, and safe data expression language</p>
        <p class="subtitle">Elo compiles to JavaScript, Ruby, and SQL. Built for No-Code tools where non-technical users need to manipulate data easily and safely.</p>
        <a href="#try" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="try" class="cta-button">Try it now</a>
      </section>

      <section class="features">
        <div class="feature-card">
          <div class="feature-icon">=</div>
          <h3>Simple by Design</h3>
          <p>A pure data language: everything is a value, no reference semantics, no <code>new</code>. One equality operator that just works. Safe for non-technical users.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">3x</div>
          <h3>Truly Portable</h3>
          <p>One expression compiles to semantically equivalent JavaScript, Ruby, and SQL. Frontend, backend, and database speak the same language.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">T</div>
          <h3>Temporal Arithmetic</h3>
          <p>First-class dates, times, and durations with intuitive syntax. <code>TODAY + P30D</code>, <code>NOW in SOQ..EOQ</code> â€” date logic that just works.</p>
        </div>
      </section>

      <section class="comparison">
        <h2>Elo vs JavaScript</h2>
        <p class="comparison-intro">See how Elo simplifies common data expressions</p>

        <div class="comparison-grid">
          <div class="comparison-example clickable" data-action="click->doc#tryExample">
            <div class="comparison-header">
              <span class="lang-badge elo-badge">Elo</span>
              <span class="comparison-title">Has the 30-day trial expired?</span>
            </div>
            <pre class="comparison-code example-code">let
  signup = D2024-06-15
in
  TODAY > signup + P30D</pre>
          </div>
          <div class="comparison-example js-example">
            <div class="comparison-header">
              <span class="lang-badge js-badge">JavaScript</span>
              <span class="comparison-title">The same thing...</span>
            </div>
            <pre class="comparison-code code-js">const signup = new Date('2024-06-15');
const trialEnd = new Date(signup);
trialEnd.setDate(trialEnd.getDate() + 30);
const today = new Date();
today.setHours(0, 0, 0, 0);
today > trialEnd;</pre>
          </div>
        </div>

        <div class="comparison-grid">
          <div class="comparison-example clickable" data-action="click->doc#tryExample">
            <div class="comparison-header">
              <span class="lang-badge elo-badge">Elo</span>
              <span class="comparison-title">Range validation</span>
            </div>
            <pre class="comparison-code example-code">let
  score = 85
in
  score in 0..100 and score not in 0...60</pre>
          </div>
          <div class="comparison-example js-example">
            <div class="comparison-header">
              <span class="lang-badge js-badge">JavaScript</span>
              <span class="comparison-title">The same thing...</span>
            </div>
            <pre class="comparison-code code-js">const score = 85;
const inRange = score >= 0 && score <= 100;
const passing = !(score >= 0 && score < 60);
inRange && passing;</pre>
          </div>
        </div>

        <div class="comparison-grid">
          <div class="comparison-example clickable" data-action="click->doc#tryExample">
            <div class="comparison-header">
              <span class="lang-badge elo-badge">Elo</span>
              <span class="comparison-title">Data transformation lambda</span>
            </div>
            <pre class="comparison-code example-code">fn( item ~> item.price * 1.21 )</pre>
          </div>
          <div class="comparison-example js-example">
            <div class="comparison-header">
              <span class="lang-badge js-badge">JavaScript</span>
              <span class="comparison-title">The same thing...</span>
            </div>
            <pre class="comparison-code code-js">// Works in JS, but what about Ruby? SQL?
// Elo compiles to all three targets.
(item) => item.price * 1.21</pre>
          </div>
        </div>
      </section>

      <section class="targets-section">
        <h2>One Expression, Three Targets</h2>
        <p class="targets-intro">Elo compiles to idiomatic code in each target language</p>

        <div class="targets-demo">
          <div class="target-input clickable" data-action="click->doc#tryExample">
            <span class="lang-badge elo-badge">Elo</span>
            <pre class="example-code">2 ^ 10 > 1000 and TODAY >= SOY</pre>
          </div>
          <div class="targets-output">
            <div class="target-card">
              <span class="lang-badge js-badge">JavaScript</span>
              <pre>Math.pow(2, 10) > 1000 && dayjs().startOf('day') >= dayjs().startOf('year')</pre>
            </div>
            <div class="target-card">
              <span class="lang-badge ruby-badge">Ruby</span>
              <pre>2 ** 10 > 1000 && Date.today >= Date.today.beginning_of_year</pre>
            </div>
            <div class="target-card">
              <span class="lang-badge sql-badge">SQL</span>
              <pre>POWER(2, 10) > 1000 AND CURRENT_DATE >= DATE_TRUNC('year', CURRENT_DATE)</pre>
            </div>
          </div>
        </div>
      </section>

      <section class="cta-section">
        <h2>Ready to try Elo?</h2>
        <p>Jump into the playground and start writing temporal expressions that just work.</p>
        <a href="#try" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="try" class="cta-button">Open Playground</a>
      </section>

      <section class="learn-teaser">
        <div class="learn-teaser-content">
          <div class="learn-teaser-icon">ðŸ“š</div>
          <h2>New to Programming?</h2>
          <p>
            Elo is designed to be your friendly first step into coding.
            No scary jargon, no confusing conceptsâ€”just simple ideas explained clearly.
          </p>
          <p class="learn-teaser-highlights">
            Learn about numbers, text, dates, decisions, and moreâ€”at your own pace.
          </p>
          <a href="#learn" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="learn" class="learn-button">Start Learning â†’</a>
        </div>
      </section>

      <section class="ai-native-section">
        <h2>Built with AI</h2>
        <p>Elo was conceived, designed, and implemented entirely with <strong>Claude Code</strong>. From lexer to compilers, every line emerged from AI-human collaboration â€” a demonstration of what's possible when humans and AI build together.</p>
      </section>

      <section class="who-section">
        <h2>Who's Behind Elo?</h2>
        <p>
          Created by <strong>Bernard Lambeau</strong> at <a href="https://enspirit.dev" target="_blank">Enspirit</a>,
          building on 25 years of software engineering &amp; language design experience with projects like
          <a href="https://finitio.io" target="_blank">Finitio</a>,
          <a href="https://www.relational-algebra.dev" target="_blank">Bmg</a>, and
          <a href="https://klaro.cards" target="_blank">Klaro Cards</a>.
        </p>
        <p>
          <a href="#about" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="about" class="about-link">Learn more about the project â†’</a>
        </p>
      </section>

      <footer class="home-footer">
        <p>
          Elo is open-source under the MIT License
          <br>
          <a href="https://github.com/enspirit/elo" target="_blank">View on GitHub</a> Â·
          <a href="https://enspirit.dev" target="_blank">Enspirit</a> Â·
          <a href="https://klaro.cards" target="_blank">Klaro Cards</a>
        </p>
      </footer>
    </div>
  </main>

  <!-- Try Panel (Playground) -->
  <main data-tabs-target="panel" data-panel="try" data-controller="playground" class="hidden">
    <section class="editor-panel">
      <div
        data-playground-target="editor"
        data-initial-code="let x = 12, y = 13 in assert(x + y == 25)"
      ></div>
    </section>

    <section class="output-panel">
      <div class="panel-header">
        <select
          data-playground-target="language"
          data-action="change->playground#compile"
        >
          <option value="javascript">JavaScript</option>
          <option value="ruby">Ruby</option>
          <option value="sql">SQL</option>
        </select>
        <label class="checkbox-label">
          <input
            type="checkbox"
            data-playground-target="pretty"
            data-action="change->playground#compile"
            checked
          />
          Pretty
        </label>
        <label class="checkbox-label">
          <input
            type="checkbox"
            data-playground-target="prelude"
            data-action="change->playground#compile"
          />
          Prelude
        </label>
        <div class="button-group">
          <button
            data-playground-target="copyButton"
            data-action="click->playground#copy"
            class="secondary-button"
          >Copy</button>
          <button
            data-playground-target="saveButton"
            data-action="click->playground#save"
            class="secondary-button"
          >Save</button>
          <button
            data-playground-target="runButton"
            data-action="click->playground#run"
            class="run-button"
          >Run</button>
        </div>
      </div>
      <pre data-playground-target="output"></pre>
      <div class="result" data-playground-target="result"></div>
      <div class="error" data-playground-target="error"></div>
    </section>
  </main>

  <!-- Learn Panel -->
  <main data-tabs-target="panel" data-panel="learn" class="learn-panel hidden" data-controller="doc">
    <aside class="learn-toc">
      <nav>
        <span class="toc-section">Lessons</span>
        <a href="#learn/lesson-1" data-action="click->tabs#switch" data-tab="learn">1. Numbers</a>
        <a href="#learn/lesson-2" data-action="click->tabs#switch" data-tab="learn">2. Strings</a>
        <a href="#learn/lesson-3" data-action="click->tabs#switch" data-tab="learn">3. Booleans</a>
        <a href="#learn/lesson-4" data-action="click->tabs#switch" data-tab="learn">4. Decisions</a>
        <a href="#learn/lesson-5" data-action="click->tabs#switch" data-tab="learn">5. Variables</a>
        <a href="#learn/lesson-6" data-action="click->tabs#switch" data-tab="learn">6. Dates</a>
        <a href="#learn/lesson-7" data-action="click->tabs#switch" data-tab="learn">7. Objects</a>
        <a href="#learn/lesson-8" data-action="click->tabs#switch" data-tab="learn">8. Functions</a>
        <a href="#learn/lesson-9" data-action="click->tabs#switch" data-tab="learn">9. Pipes</a>
        <span class="toc-section">Next</span>
        <a href="#learn/lesson-next" data-action="click->tabs#switch" data-tab="learn">What's Next?</a>
      </nav>
    </aside>
    <article class="learn-content">
      <header class="page-header">
        <h1>Learn Elo</h1>
        <p class="page-intro">
          Programming doesn't have to be scary. Elo is designed to be simple, intuitive, andâ€”dare we sayâ€”fun.
          Let's learn together, one step at a time.
        </p>
      </header>

      <section class="lesson" id="lesson-1">
        <h2>1. Playing with Numbers</h2>
        <p>
          Let's start with something familiar: math. Elo understands numbers and basic arithmetic.
          No special syntax, no tricksâ€”just write it like you'd write it on paper.
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">2 + 3
10 - 4
6 * 7
20 / 4</pre>
          <p class="try-it">
            <a href="#try" data-action="click->tabs#switch" data-tab="try">Try it in the playground â†’</a>
          </p>
        </div>
        <p>
          You can combine operations too. Elo follows the usual rulesâ€”multiplication before addition:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">2 + 3 * 4      # That's 14, not 20
(2 + 3) * 4    # Now it's 20</pre>
        </div>
        <p class="lesson-tip">
          <strong>Fun fact:</strong> Elo doesn't have "variables that change." Once you name something, it stays that way.
          No surprises, no bugs from unexpected changes.
        </p>
      </section>

      <section class="lesson" id="lesson-2">
        <h2>2. Words, Words, Words</h2>
        <p>
          Text in Elo is called a <em>String</em>. Just wrap your words in quotes:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">'Hello, World!'
'Elo is fun'</pre>
        </div>
        <p>
          Want to combine strings? Use the <code>+</code> operator (think of it as gluing words together):
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">'Hello, ' + 'World!'     # 'Hello, World!'
'Elo' + ' ' + 'rocks'    # 'Elo rocks'</pre>
        </div>
        <p>
          Elo has handy functions to transform text:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">upper('hello')       # 'HELLO'
lower('SHOUT')       # 'shout'
length('Elo')        # 3
trim('  space  ')    # 'space'</pre>
        </div>
      </section>

      <section class="lesson" id="lesson-3">
        <h2>3. True or False?</h2>
        <p>
          Computers love yes/no questions. In Elo, we have <code>true</code> and <code>false</code>:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">5 > 3          # true (5 is greater than 3)
2 == 2         # true (2 equals 2)
'a' == 'b'     # false (different letters)
10 <= 10       # true (10 is less than or equal to 10)</pre>
        </div>
        <p>
          You can combine conditions with <code>and</code>, <code>or</code>, and <code>not</code>:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">true and false    # false (both must be true)
true or false     # true (at least one is true)
not true          # false (flips the value)</pre>
        </div>
        <p class="lesson-tip">
          <strong>Real-world example:</strong> <code>age >= 18 and hasLicense</code> â€” Can this person drive?
        </p>
      </section>

      <section class="lesson" id="lesson-4">
        <h2>4. Making Decisions</h2>
        <p>
          Life is full of choices. Elo handles them with <code>if</code>/<code>then</code>/<code>else</code>:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">if 5 > 3 then 'yes' else 'no'

let age = 18 in
  if age >= 18
    then 'Welcome!'
    else 'Sorry, adults only'</pre>
        </div>
        <p>
          Notice something? In Elo, <code>if</code> is an <em>expression</em>â€”it always produces a value.
          There's no "do this, then do that." Everything is about computing a result.
        </p>
        <p class="lesson-tip">
          <strong>Think spreadsheets:</strong> It's like Excel's <code>=IF(A1>10, "big", "small")</code>, but cleaner!
        </p>
      </section>

      <section class="lesson" id="lesson-5">
        <h2>5. Naming Things</h2>
        <p>
          Repeating yourself is boring. Give values a name with <code>let</code>:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">let price = 100 in
  price * 1.21

let name = 'World' in
  'Hello, ' + name + '!'</pre>
        </div>
        <p>
          You can name multiple things:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">let width = 10,
    height = 5 in
  width * height</pre>
        </div>
        <p class="lesson-tip">
          <strong>No surprises:</strong> Once <code>price</code> is 100, it's always 100.
          You can't accidentally change it later. That's a feature, not a bug!
        </p>
      </section>

      <section class="lesson" id="lesson-6">
        <h2>6. Time Flies</h2>
        <p>
          Elo speaks dates and times fluently. Write them naturally:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">D2024-12-25                # Christmas 2024
D2024-12-31T23:59:59Z      # New Year's Eve
TODAY                      # Whatever today is
NOW                        # Right now, with time</pre>
        </div>
        <p>
          The magic happens with <em>durations</em>. Want to know what's 30 days from today?
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">TODAY + P30D               # 30 days from now
D2024-01-01 + P1Y          # One year later
NOW + PT2H30M              # 2.5 hours from now</pre>
        </div>
        <p>
          Extract parts of dates:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">year(TODAY)      # current year
month(TODAY)     # 1-12
day(TODAY)       # 1-31</pre>
        </div>
        <p class="lesson-tip">
          <strong>Pro tip:</strong> <code>P1Y2M3D</code> means "1 year, 2 months, 3 days."
          <code>PT</code> is for time: <code>PT1H30M</code> = 1 hour 30 minutes.
        </p>
      </section>

      <section class="lesson" id="lesson-7">
        <h2>7. Bundling Data</h2>
        <p>
          Real data comes in bundles. A person has a name, age, email. Elo uses <em>objects</em>:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">{
  name: 'Alice',
  age: 30,
  city: 'Brussels'
}</pre>
        </div>
        <p>
          Access parts with a dot:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">let person = { name: 'Alice', age: 30 } in
  person.name

let person = { name: 'Bob', age: 25 } in
  person.age >= 18</pre>
        </div>
        <p class="lesson-tip">
          <strong>Sounds familiar?</strong> If you've seen JSON, you've seen this.
          Elo objects work the same way.
        </p>
      </section>

      <section class="lesson" id="lesson-8">
        <h2>8. Building Blocks</h2>
        <p>
          Functions are reusable recipes. Define them with <code>fn</code>:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">let double = fn( x ~> x * 2 ) in
  double(5)

let greet = fn( name ~> 'Hello, ' + name + '!' ) in
  greet('Elo')</pre>
        </div>
        <p>
          The arrow <code>~></code> means "takes this, produces that." Simple!
        </p>
        <p>
          Functions can take multiple inputs:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">let add = fn( a, b ~> a + b ) in
  add(3, 4)

let fullName = fn( first, last ~> first + ' ' + last ) in
  fullName('Ada', 'Lovelace')</pre>
        </div>
      </section>

      <section class="lesson" id="lesson-9">
        <h2>9. Piping It Through</h2>
        <p>
          Sometimes you want to chain operations. The pipe operator <code>|></code> makes it readable:
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code"># Without pipes (inside-out reading):
upper(trim('  hello  '))

# With pipes (left-to-right reading):
'  hello  ' |> trim |> upper</pre>
        </div>
        <p>
          It's like a conveyor belt: data flows from left to right, getting transformed at each step.
        </p>
        <div class="lesson-example" data-action="click->doc#tryExample">
          <pre class="example-code">'  elo is fun  '
  |> trim
  |> upper
  |> length</pre>
        </div>
        <p class="lesson-tip">
          <strong>Think Unix pipes:</strong> <code>cat file | grep "error" | wc -l</code>â€”same idea, cleaner syntax.
        </p>
      </section>

      <section class="lesson" id="lesson-next">
        <h2>What's Next?</h2>
        <p>
          You've learned the essentials! Here's where to go from here:
        </p>
        <ul class="next-steps">
          <li>
            <a href="#try" data-action="click->tabs#switch" data-tab="try"><strong>Try the Playground</strong></a>
            â€” Experiment with everything you've learned
          </li>
          <li>
            <a href="#doc" data-action="click->tabs#switch" data-tab="doc"><strong>Read the Reference</strong></a>
            â€” Dive deeper into Elo's features
          </li>
          <li>
            <a href="#stdlib" data-action="click->tabs#switch" data-tab="stdlib"><strong>Explore the Stdlib</strong></a>
            â€” Discover all built-in functions
          </li>
        </ul>
        <p class="lesson-closing">
          Remember: Elo compiles to JavaScript, Ruby, and SQL. What you write once runs everywhere.
          <br>Happy coding!
        </p>
      </section>

      <footer class="learn-footer">
        <p>
          Elo is open-source under the MIT License
          <br>
          <a href="https://github.com/enspirit/elo" target="_blank">View on GitHub</a> Â·
          <a href="https://enspirit.dev" target="_blank">Enspirit</a> Â·
          <a href="https://klaro.cards" target="_blank">Klaro Cards</a>
        </p>
      </footer>
    </article>
  </main>

  <!-- Doc Panel -->
  <main data-tabs-target="panel" data-panel="doc" class="doc-panel hidden" data-controller="doc">
    <aside class="doc-toc">
      <nav>
        <span class="toc-section">Language</span>
        <a href="#doc/getting-started" data-action="click->tabs#switch" data-tab="doc">Getting Started</a>
        <a href="#doc/types" data-action="click->tabs#switch" data-tab="doc">Types</a>
        <a href="#doc/literals" data-action="click->tabs#switch" data-tab="doc">Literals</a>
        <a href="#doc/objects" data-action="click->tabs#switch" data-tab="doc">Objects</a>
        <a href="#doc/operators" data-action="click->tabs#switch" data-tab="doc">Operators</a>
        <a href="#doc/variables" data-action="click->tabs#switch" data-tab="doc">Variables</a>
        <a href="#doc/conditionals" data-action="click->tabs#switch" data-tab="doc">Conditionals</a>
        <a href="#doc/lambdas" data-action="click->tabs#switch" data-tab="doc">Lambdas</a>
        <a href="#doc/ranges" data-action="click->tabs#switch" data-tab="doc">Ranges</a>
        <a href="#doc/type-selectors" data-action="click->tabs#switch" data-tab="doc">Type Selectors</a>
        <a href="#doc/assertions" data-action="click->tabs#switch" data-tab="doc">Assertions</a>
        <span class="toc-section">Tools</span>
        <a href="#doc/examples" data-action="click->tabs#switch" data-tab="doc">Examples</a>
        <a href="#doc/javascript-api" data-action="click->tabs#switch" data-tab="doc">JavaScript API</a>
        <a href="#doc/command-line" data-action="click->tabs#switch" data-tab="doc">Command Line</a>
      </nav>
    </aside>
    <article class="doc-content">
      <header class="page-header">
        <h1>The Elo Language</h1>
        <p class="page-intro">
          Elo is a small expression language that compiles to <strong>JavaScript</strong>,
          <strong>Ruby</strong>, and <strong>SQL</strong>. Write once, run anywhere.
        </p>
      </header>

      <section class="doc-section" id="getting-started">
        <h2>Getting Started</h2>
        <p>
          Elo expressions compile to equivalent code in all three target languages.
          Click any example to try it in the playground.
        </p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Hello, Math!</div>
          <pre class="example-code">2 + 3 * 4</pre>
          <p class="example-desc">Basic arithmetic follows standard precedence rules.</p>
        </div>
      </section>

      <section class="doc-section" id="types">
        <h2>Types</h2>
        <p>Elo has a simple type system with the following types. Use <code>typeOf()</code> to inspect types at runtime.</p>

        <table class="type-table">
          <thead>
            <tr>
              <th>Type</th>
              <th>Description</th>
              <th>Examples</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>Int</code></td>
              <td>Integer numbers</td>
              <td><code>42</code>, <code>-7</code>, <code>0</code></td>
            </tr>
            <tr>
              <td><code>Float</code></td>
              <td>Floating-point numbers</td>
              <td><code>3.14</code>, <code>-0.5</code></td>
            </tr>
            <tr>
              <td><code>Bool</code></td>
              <td>Boolean values</td>
              <td><code>true</code>, <code>false</code></td>
            </tr>
            <tr>
              <td><code>String</code></td>
              <td>Text strings</td>
              <td><code>'hello'</code>, <code>'world'</code></td>
            </tr>
            <tr>
              <td><code>DateTime</code></td>
              <td>Dates and timestamps</td>
              <td><code>D2024-01-15</code>, <code>NOW</code>, <code>TODAY</code></td>
            </tr>
            <tr>
              <td><code>Duration</code></td>
              <td>Time periods</td>
              <td><code>P1D</code>, <code>PT2H30M</code>, <code>P1Y2M</code></td>
            </tr>
            <tr>
              <td><code>Object</code></td>
              <td>Key-value objects</td>
              <td><code>{name: 'Alice', age: 30}</code></td>
            </tr>
            <tr>
              <td><code>Fn</code></td>
              <td>Lambda functions and predicates</td>
              <td><code>fn( x ~> x * 2 )</code>, <code>fn( x | x > 0 )</code></td>
            </tr>
            <tr>
              <td><code>NoVal</code></td>
              <td>Null/undefined/nil values (from external sources)</td>
              <td><code>typeOf(nullVar)</code> â†’ <code>'NoVal'</code></td>
            </tr>
          </tbody>
        </table>

        <p class="note"><strong>Note:</strong> Elo has no null literal. <code>NoVal</code> represents null values that come from external sources (databases, JSON, APIs). Use <code>isVal()</code> and <code>orVal()</code> to handle them safely.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Type Introspection</div>
          <pre class="example-code">typeOf(42) == 'Int' and typeOf(P1D) == 'Duration'</pre>
          <p class="example-desc">Use <code>typeOf()</code> to get the type name as a string.</p>
        </div>
      </section>

      <section class="doc-section" id="literals">
        <h2>Literals</h2>
        <p>Elo supports numbers, booleans, strings, dates, and durations as first-class values.</p>

        <h3>Numbers</h3>
        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Integers &amp; Floats</div>
          <pre class="example-code">42 + 3.14</pre>
          <p class="example-desc">Numbers include integers and floating-point values.</p>
        </div>

        <h3>Booleans</h3>
        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Boolean Literals</div>
          <pre class="example-code">true and not false</pre>
          <p class="example-desc"><code>true</code> and <code>false</code> are boolean literals.</p>
        </div>

        <h3>Strings</h3>
        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">String Literal</div>
          <pre class="example-code">'hello world'</pre>
          <p class="example-desc">Strings use single quotes. Escape with backslash: <code>'it\'s working'</code>.</p>
        </div>

        <h3>Dates &amp; Times</h3>
        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Date Literal</div>
          <pre class="example-code">D2025-12-25</pre>
          <p class="example-desc">ISO date format with <code>D</code> prefix.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">DateTime Literal</div>
          <pre class="example-code">T2025-12-31T23:59:59</pre>
          <p class="example-desc">Full timestamp with <code>T</code> prefix.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Temporal Keywords</div>
          <pre class="example-code">TODAY &lt; NOW</pre>
          <p class="example-desc">
            <code>NOW</code> is the current timestamp, <code>TODAY</code> is midnight today.
          </p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Period Boundaries</div>
          <pre class="example-code">SOY &lt;= TODAY and TODAY &lt;= EOY</pre>
          <p class="example-desc">
            Start/End of Year (<code>SOY</code>/<code>EOY</code>), Quarter (<code>SOQ</code>/<code>EOQ</code>),
            Month (<code>SOM</code>/<code>EOM</code>), Week (<code>SOW</code>/<code>EOW</code>).
          </p>
        </div>

        <h3>Durations</h3>
        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Duration Literal</div>
          <pre class="example-code">P1Y2M3D</pre>
          <p class="example-desc">1 year, 2 months, 3 days. Use <code>P</code> prefix (ISO 8601).</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Time Durations</div>
          <pre class="example-code">PT2H30M</pre>
          <p class="example-desc">2 hours and 30 minutes. Use <code>PT</code> for time-only durations.</p>
        </div>
      </section>

      <section class="doc-section" id="objects">
        <h2>Object Literals</h2>
        <p>Elo supports object literals with key-value pairs. Objects compile to native structures in each target language.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Simple Object</div>
          <pre class="example-code">{name: 'Alice', age: 30}</pre>
          <p class="example-desc">Create an object with named properties. Keys are identifiers, values are any expression.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Property Access</div>
          <pre class="example-code">{budget: 1500}.budget</pre>
          <p class="example-desc">Access properties with dot notation.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Empty Object</div>
          <pre class="example-code">{}</pre>
          <p class="example-desc">An empty object with no properties.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Object with Let</div>
          <pre class="example-code">let obj = {x: 10, y: 20} in obj.x + obj.y</pre>
          <p class="example-desc">Bind an object to a variable and access its properties.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Nested Expressions</div>
          <pre class="example-code">{total: 100 + 50, discount: 10 * 2}</pre>
          <p class="example-desc">Property values can be any Elo expression.</p>
        </div>

        <p class="note"><strong>Note:</strong> In SQL, objects compile to PostgreSQL JSONB using <code>jsonb_build_object()</code>.</p>
      </section>

      <section class="doc-section" id="operators">
        <h2>Operators</h2>
        <p>Elo provides arithmetic, comparison, and logical operators.</p>

        <h3>Arithmetic</h3>
        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Basic Operations</div>
          <pre class="example-code">(10 + 5) * 2 - 8 / 4</pre>
          <p class="example-desc">Addition <code>+</code>, subtraction <code>-</code>, multiplication <code>*</code>, division <code>/</code>.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Power &amp; Modulo</div>
          <pre class="example-code">2 ^ 10 + 17 % 5</pre>
          <p class="example-desc">Power <code>^</code> and remainder <code>%</code> operators.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">String Concatenation</div>
          <pre class="example-code">'hello' + ' ' + 'world'</pre>
          <p class="example-desc">The <code>+</code> operator concatenates strings.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Date Arithmetic</div>
          <pre class="example-code">TODAY + P7D</pre>
          <p class="example-desc">Add durations to dates. Subtract with <code>-</code>.</p>
        </div>

        <h3>Comparison</h3>
        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Comparison Operators</div>
          <pre class="example-code">10 > 5 and 3 <= 3</pre>
          <p class="example-desc">Use <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>==</code>, <code>!=</code>.</p>
        </div>

        <h3>Logical</h3>
        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Logical Operators</div>
          <pre class="example-code">(5 > 3 and 2 < 4) or not (1 == 2)</pre>
          <p class="example-desc">Combine conditions with <code>and</code>, <code>or</code>, and <code>not</code>.</p>
        </div>

        <h3>Pipe Operator</h3>
        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Function Chaining</div>
          <pre class="example-code">'  hello world  ' |> trim |> upper</pre>
          <p class="example-desc">The pipe operator <code>|&gt;</code> passes the left value as the first argument to the right function. Parentheses are optional for no-argument calls.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Pipe with Arguments</div>
          <pre class="example-code">'42' |> padStart(5, '0')</pre>
          <p class="example-desc">Additional arguments follow the piped value: <code>x |&gt; f(a, b)</code> becomes <code>f(x, a, b)</code>.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Mixed Style</div>
          <pre class="example-code">'hello' |> upper |> padStart(10, '-')</pre>
          <p class="example-desc">Mix styles freely: <code>upper</code> without parens, <code>padStart</code> with additional arguments.</p>
        </div>

        <h3>Alternative Operator</h3>
        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Fallback Chain</div>
          <pre class="example-code">indexOf('hello', 'x') | indexOf('hello', 'l') | -1</pre>
          <p class="example-desc">The <code>|</code> operator returns the first defined value (non-NoVal). Useful for providing defaults when operations may fail.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Simple Default</div>
          <pre class="example-code">indexOf('test', 'z') | 0</pre>
          <p class="example-desc">If <code>indexOf</code> returns NoVal (not found), use <code>0</code> as the default.</p>
        </div>
      </section>

      <section class="doc-section" id="variables">
        <h2>Local Variables</h2>
        <p>Use <code>let ... in</code> expressions to bind local variables.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Simple Binding</div>
          <pre class="example-code">let x = 10 in x * 2</pre>
          <p class="example-desc">Bind a value to a name, then use it in an expression.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Multiple Bindings</div>
          <pre class="example-code">let width = 5, height = 3 in width * height</pre>
          <p class="example-desc">Bind multiple variables separated by commas.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Nested Let</div>
          <pre class="example-code">let a = 2 in let b = a * 3 in b + 1</pre>
          <p class="example-desc">Variables can reference earlier bindings.</p>
        </div>
      </section>

      <section class="doc-section" id="conditionals">
        <h2>Conditionals</h2>
        <p>Use <code>if ... then ... else</code> expressions to branch based on conditions.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Simple Conditional</div>
          <pre class="example-code">if 5 > 3 then 'yes' else 'no'</pre>
          <p class="example-desc">Returns 'yes' if the condition is true, 'no' otherwise.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Chained Conditionals</div>
          <pre class="example-code">if x > 0 then 'positive' else if x < 0 then 'negative' else 'zero'</pre>
          <p class="example-desc">Chain multiple conditions for if-else-if logic.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Conditional with Arithmetic</div>
          <pre class="example-code">if 10 > 5 then 100 + 1 else 200 - 1</pre>
          <p class="example-desc">Branches can contain any expression.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Conditional with Let</div>
          <pre class="example-code">let x = 10 in if x > 5 then 'big' else 'small'</pre>
          <p class="example-desc">Combine conditionals with local variables.</p>
        </div>
      </section>

      <section class="doc-section" id="lambdas">
        <h2>Lambdas and Predicates</h2>
        <p>Elo provides two kinds of anonymous functions:</p>
        <ul>
          <li><strong>Lambdas</strong>: <code>fn( params ~> body )</code> â€” general functions that can return any type</li>
          <li><strong>Predicates</strong>: <code>fn( params | body )</code> â€” functions that always return a boolean</li>
        </ul>

        <h3>Lambda Expressions</h3>
        <p>Use the arrow <code>~></code> syntax for general-purpose functions:</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Simple Lambda</div>
          <pre class="example-code">fn( x ~> x * 2 )</pre>
          <p class="example-desc">A function that doubles its input. Compiles to arrow functions in JS, procs in Ruby.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Multiple Parameters</div>
          <pre class="example-code">fn( x, y ~> x + y )</pre>
          <p class="example-desc">Lambdas can take multiple parameters, separated by commas.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">With Member Access</div>
          <pre class="example-code">fn( _ ~> _.price * 1.21 )</pre>
          <p class="example-desc">Common pattern: use <code>_</code> as a placeholder to access object properties.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Lambda with Conditional</div>
          <pre class="example-code">fn( x ~> if x > 0 then x else 0 - x )</pre>
          <p class="example-desc">The body can contain any expression, including conditionals.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Lambda with Let</div>
          <pre class="example-code">fn( x ~> let doubled = x * 2 in doubled + 1 )</pre>
          <p class="example-desc">Use local variables inside the lambda body for complex expressions.</p>
        </div>

        <h3>Predicate Expressions</h3>
        <p>Use the pipe <code>|</code> syntax for predicates (functions that return boolean):</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Simple Predicate</div>
          <pre class="example-code">fn( x | x > 0 )</pre>
          <p class="example-desc">A predicate that tests if a number is positive. Always returns true or false.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Range Check Predicate</div>
          <pre class="example-code">fn( x | x >= 0 and x <= 100 )</pre>
          <p class="example-desc">Predicates are ideal for validation and filtering.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Object Predicate</div>
          <pre class="example-code">fn( item | item.active and item.price > 0 )</pre>
          <p class="example-desc">Test conditions on object properties.</p>
        </div>

        <h3>Invoking Lambdas and Predicates</h3>
        <p>Bind a lambda or predicate to a name with <code>let</code>, then call it like a function.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Call a Lambda</div>
          <pre class="example-code">let double = fn( x ~> x * 2 ) in double(5)</pre>
          <p class="example-desc">Bind a lambda to <code>double</code>, then call it with an argument. Returns 10.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Call a Predicate</div>
          <pre class="example-code">let isPositive = fn( x | x > 0 ) in isPositive(5)</pre>
          <p class="example-desc">Call the predicate. Returns true.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Lambda with Assert</div>
          <pre class="example-code">let add = fn( x, y ~> x + y ) in assert(add(3, 4) == 7)</pre>
          <p class="example-desc">Test your lambdas with assertions.</p>
        </div>

        <p class="note"><strong>Note:</strong> Lambdas and predicates compile to JavaScript and Ruby only. SQL does not support function expressions.</p>

        <p class="note"><strong>Note:</strong> Recursive function calls are not allowed. A lambda cannot call itselfâ€”this keeps Elo simple and safe for No-Code contexts.</p>
      </section>

      <section class="doc-section" id="ranges">
        <h2>Range Membership</h2>
        <p>Check if a value falls within a range using the <code>in</code> operator.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Inclusive Range</div>
          <pre class="example-code">5 in 1..10</pre>
          <p class="example-desc">True if 5 &gt;= 1 AND 5 &lt;= 10. Both ends are included.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Exclusive End Range</div>
          <pre class="example-code">5 in 1...10</pre>
          <p class="example-desc">True if 5 &gt;= 1 AND 5 &lt; 10. End is excluded (Ruby-style).</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Negated Range</div>
          <pre class="example-code">11 not in 1..10</pre>
          <p class="example-desc">True if value is outside the range. Reads naturally!</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Date Range Check</div>
          <pre class="example-code">TODAY in SOY..EOY</pre>
          <p class="example-desc">Check if today is within the current year.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Combined Ranges</div>
          <pre class="example-code">x in 0..100 and y in 0..100</pre>
          <p class="example-desc">Multiple range checks with <code>and</code>/<code>or</code> keywords.</p>
        </div>
      </section>

      <section class="doc-section" id="type-selectors">
        <h2>Type Selectors</h2>
        <p>Type selectors convert values to specific types, parsing strings when needed. They return <code>NoVal</code> on invalid input, making them composable with the <code>|</code> alternative operator.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Parse String to Integer</div>
          <pre class="example-code">Int('123')</pre>
          <p class="example-desc">Parses the string <code>'123'</code> to the integer <code>123</code>.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Parse with Default</div>
          <pre class="example-code">Int('abc') | 0</pre>
          <p class="example-desc">Returns <code>0</code> because <code>'abc'</code> cannot be parsed as an integer.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Parse Date</div>
          <pre class="example-code">Date('2025-01-15') == D2025-01-15</pre>
          <p class="example-desc">Parses an ISO date string to a Date value.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Parse Duration</div>
          <pre class="example-code">Duration('P1D') == P1D</pre>
          <p class="example-desc">Parses an ISO 8601 duration string.</p>
        </div>

        <p>Available type selectors: <code>Int()</code>, <code>Float()</code>, <code>Bool()</code>, <code>Date()</code>, <code>Datetime()</code>, <code>Duration()</code>. See <a href="#stdlib/stdlib-type-selectors" data-action="click->tabs#switch" data-tab="stdlib">Stdlib â†’ Type Selectors</a> for details.</p>
      </section>

      <section class="doc-section" id="assertions">
        <h2>Assertions</h2>
        <p>Use <code>assert()</code> to validate conditions at runtime.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Simple Assert</div>
          <pre class="example-code">assert(2 + 2 == 4)</pre>
          <p class="example-desc">Throws an error if the condition is false.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Assert with Let</div>
          <pre class="example-code">let price = 100, tax = 0.2 in assert(price * (1 + tax) == 120)</pre>
          <p class="example-desc">Combine assertions with local variables for readable tests.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Fail with Message</div>
          <pre class="example-code">indexOf('hello', 'x') | fail('character not found')</pre>
          <p class="example-desc">Use <code>fail(message)</code> to throw an error with a custom message. Often used as the last alternative in a <code>|</code> chain.</p>
        </div>
      </section>

      <section class="doc-section" id="examples">
        <h2>Real-World Examples</h2>
        <p>Putting it all together:</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Subscription Check</div>
          <pre class="example-code">let
  signup_date = D2024-01-15,
  trial_period = P30D,
  trial_end = signup_date + trial_period
in
  TODAY > trial_end</pre>
          <p class="example-desc">Check if a 30-day trial has expired.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Quarterly Report Window</div>
          <pre class="example-code">let
  report_due = EOQ + P5D,
  days_left = report_due - TODAY
in
  TODAY &lt;= report_due</pre>
          <p class="example-desc">Reports are due 5 days after end of quarter.</p>
        </div>
      </section>

      <section class="doc-section" id="javascript-api">
        <h2>JavaScript API</h2>
        <p>Elo provides a JavaScript/TypeScript API for compiling expressions programmatically. Install with <code>npm install @enspirit/elo</code>.</p>

        <h3>compile()</h3>
        <p>The <code>compile()</code> function creates a callable JavaScript function from an Elo lambda expression:</p>

        <pre class="code-js">import { compile } from '@enspirit/elo';
import dayjs from 'dayjs';
import duration from 'dayjs/plugin/duration';
import isoWeek from 'dayjs/plugin/isoWeek';
import quarterOfYear from 'dayjs/plugin/quarterOfYear';

// Configure dayjs with required plugins
dayjs.extend(duration);
dayjs.extend(isoWeek);
dayjs.extend(quarterOfYear);

// Compile a lambda to a callable function
const double = compile&lt;(x: number) =&gt; number&gt;(
  'fn(x ~&gt; x * 2)',
  { runtime: { dayjs } }
);
double(21); // =&gt; 42

// Temporal expressions work too
const inThisWeek = compile&lt;(d: unknown) =&gt; boolean&gt;(
  'fn(d ~&gt; d in SOW ... EOW)',
  { runtime: { dayjs } }
);
inThisWeek(dayjs()); // =&gt; true or false</pre>

        <p>The <code>runtime</code> option injects dependencies into the compiled function. Currently, <code>dayjs</code> is required for temporal operations.</p>

        <h3>Lower-Level API</h3>
        <p>For more control, you can use the lower-level parsing and compilation functions:</p>

        <pre class="code-js">import { parse, compileToJavaScript, compileToRuby, compileToSQL } from '@enspirit/elo';

// Parse an expression to an AST
const ast = parse('2 + 3 * 4');

// Compile to different targets
compileToJavaScript(ast); // =&gt; "2 + 3 * 4"
compileToRuby(ast);       // =&gt; "2 + 3 * 4"
compileToSQL(ast);        // =&gt; "2 + 3 * 4"</pre>

        <h3>API Reference</h3>
        <table class="type-table">
          <thead>
            <tr>
              <th>Function</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>compile(source, options?)</code></td>
              <td>Compiles an Elo lambda to a callable JS function</td>
            </tr>
            <tr>
              <td><code>parse(source)</code></td>
              <td>Parses Elo source code to an AST</td>
            </tr>
            <tr>
              <td><code>compileToJavaScript(ast)</code></td>
              <td>Compiles an AST to JavaScript code string</td>
            </tr>
            <tr>
              <td><code>compileToRuby(ast)</code></td>
              <td>Compiles an AST to Ruby code string</td>
            </tr>
            <tr>
              <td><code>compileToSQL(ast)</code></td>
              <td>Compiles an AST to PostgreSQL code string</td>
            </tr>
          </tbody>
        </table>
      </section>

      <section class="doc-section" id="command-line">
        <h2>Command Line</h2>
        <p>Elo provides a CLI tool <code>eloc</code> for compiling expressions from the terminal.</p>

        <h3>Installation</h3>
        <pre class="code-js">npm install @enspirit/elo
./node_modules/.bin/eloc --help</pre>

        <h3>Usage</h3>
        <pre class="code-js"># Compile expression to JavaScript (default)
eloc -e "2 + 3 * 4"

# Compile to Ruby
eloc -e "2 + 3 * 4" -t ruby

# Compile to SQL
eloc -e "2 + 3 * 4" -t sql

# Include runtime prelude
eloc -e "NOW + PT2H" -t ruby -p

# Compile from file
eloc input.elo -t ruby

# Compile from stdin
echo "2 + 3 * 4" | eloc -</pre>

        <h3>Options</h3>
        <table class="type-table">
          <thead>
            <tr>
              <th>Option</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>-e, --expression &lt;expr&gt;</code></td>
              <td>Expression to compile</td>
            </tr>
            <tr>
              <td><code>-t, --target &lt;lang&gt;</code></td>
              <td>Target language: <code>js</code> (default), <code>ruby</code>, <code>sql</code></td>
            </tr>
            <tr>
              <td><code>-p, --prelude</code></td>
              <td>Include runtime library imports</td>
            </tr>
            <tr>
              <td><code>--prelude-only</code></td>
              <td>Output only the prelude (no expression)</td>
            </tr>
            <tr>
              <td><code>-f, --file &lt;path&gt;</code></td>
              <td>Output to file instead of stdout</td>
            </tr>
            <tr>
              <td><code>-</code></td>
              <td>Read from stdin</td>
            </tr>
          </tbody>
        </table>
      </section>

      <footer class="doc-footer">
        <p>
          Elo is open-source under the MIT License
          <br>
          <a href="https://github.com/enspirit/elo" target="_blank">View on GitHub</a> Â·
          <a href="https://enspirit.dev" target="_blank">Enspirit</a> Â·
          <a href="https://klaro.cards" target="_blank">Klaro Cards</a>
        </p>
      </footer>
    </article>
  </main>

  <!-- Stdlib Panel -->
  <main data-tabs-target="panel" data-panel="stdlib" class="stdlib-panel hidden" data-controller="doc stdlib-search">
    <aside class="stdlib-toc">
      <nav>
        <a href="#stdlib/stdlib-numeric" data-action="click->tabs#switch" data-tab="stdlib">Numeric</a>
        <a href="#stdlib/stdlib-temporal" data-action="click->tabs#switch" data-tab="stdlib">Temporal</a>
        <a href="#stdlib/stdlib-string" data-action="click->tabs#switch" data-tab="stdlib">String</a>
        <a href="#stdlib/stdlib-introspection" data-action="click->tabs#switch" data-tab="stdlib">Introspection</a>
        <a href="#stdlib/stdlib-type-selectors" data-action="click->tabs#switch" data-tab="stdlib">Type Selectors</a>
      </nav>
    </aside>
    <article class="stdlib-content">
      <header class="page-header">
        <h1>Standard Library</h1>
        <p class="page-intro">Built-in functions available in Elo. Click any function to try it in the playground.</p>
        <div class="stdlib-search-bar">
          <input
            type="text"
            placeholder="Search functions..."
            data-stdlib-search-target="input"
            data-action="input->stdlib-search#filter"
          />
          <button
            type="button"
            class="stdlib-search-clear"
            data-stdlib-search-target="clearButton"
            data-action="click->stdlib-search#clear"
            aria-label="Clear search"
          >&times;</button>
        </div>
      </header>

      <section class="stdlib-section" id="stdlib-numeric" data-stdlib-search-target="section">
        <h2>Numeric Functions</h2>
        <p>Common mathematical functions for numeric operations.</p>

        <div class="stdlib-grid" data-stdlib-search-target="grid">
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">abs</div>
            <div class="fn-sig">(n: Int | Float) â†’ Int | Float</div>
            <p class="fn-desc">Returns the absolute value of a number.</p>
            <div class="fn-example"><code class="example-code">abs(-5)</code><span class="fn-result">â†’ 5</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">round</div>
            <div class="fn-sig">(n: Float) â†’ Int</div>
            <p class="fn-desc">Rounds a number to the nearest integer.</p>
            <div class="fn-example"><code class="example-code">round(3.7)</code><span class="fn-result">â†’ 4</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">floor</div>
            <div class="fn-sig">(n: Float) â†’ Int</div>
            <p class="fn-desc">Rounds a number down to the nearest integer.</p>
            <div class="fn-example"><code class="example-code">floor(3.9)</code><span class="fn-result">â†’ 3</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">ceil</div>
            <div class="fn-sig">(n: Float) â†’ Int</div>
            <p class="fn-desc">Rounds a number up to the nearest integer.</p>
            <div class="fn-example"><code class="example-code">ceil(3.2)</code><span class="fn-result">â†’ 4</span></div>
          </div>
        </div>
      </section>

      <section class="stdlib-section" id="stdlib-temporal" data-stdlib-search-target="section">
        <h2>Temporal Functions</h2>
        <p>Functions to extract components from dates and datetimes.</p>

        <div class="stdlib-grid" data-stdlib-search-target="grid">
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">year</div>
            <div class="fn-sig">(d: Date | DateTime) â†’ Int</div>
            <p class="fn-desc">Extracts the year from a date or datetime.</p>
            <div class="fn-example"><code class="example-code">year(D2024-06-15)</code><span class="fn-result">â†’ 2024</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">month</div>
            <div class="fn-sig">(d: Date | DateTime) â†’ Int</div>
            <p class="fn-desc">Extracts the month (1-12) from a date or datetime.</p>
            <div class="fn-example"><code class="example-code">month(D2024-06-15)</code><span class="fn-result">â†’ 6</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">day</div>
            <div class="fn-sig">(d: Date | DateTime) â†’ Int</div>
            <p class="fn-desc">Extracts the day of month (1-31) from a date or datetime.</p>
            <div class="fn-example"><code class="example-code">day(D2024-06-15)</code><span class="fn-result">â†’ 15</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">hour</div>
            <div class="fn-sig">(dt: DateTime) â†’ Int</div>
            <p class="fn-desc">Extracts the hour (0-23) from a datetime.</p>
            <div class="fn-example"><code class="example-code">hour(D2024-06-15T14:30:00Z)</code><span class="fn-result">â†’ 14</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">minute</div>
            <div class="fn-sig">(dt: DateTime) â†’ Int</div>
            <p class="fn-desc">Extracts the minute (0-59) from a datetime.</p>
            <div class="fn-example"><code class="example-code">minute(D2024-06-15T14:30:00Z)</code><span class="fn-result">â†’ 30</span></div>
          </div>
        </div>
      </section>

      <section class="stdlib-section" id="stdlib-string" data-stdlib-search-target="section">
        <h2>String Functions</h2>
        <p>A comprehensive set of string manipulation functions.</p>

        <div class="stdlib-grid" data-stdlib-search-target="grid">
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">length</div>
            <div class="fn-sig">(s: String) â†’ Int</div>
            <p class="fn-desc">Returns the number of characters in the string.</p>
            <div class="fn-example"><code class="example-code">length('hello')</code><span class="fn-result">â†’ 5</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">upper</div>
            <div class="fn-sig">(s: String) â†’ String</div>
            <p class="fn-desc">Converts all characters to uppercase.</p>
            <div class="fn-example"><code class="example-code">upper('hello')</code><span class="fn-result">â†’ 'HELLO'</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">lower</div>
            <div class="fn-sig">(s: String) â†’ String</div>
            <p class="fn-desc">Converts all characters to lowercase.</p>
            <div class="fn-example"><code class="example-code">lower('HELLO')</code><span class="fn-result">â†’ 'hello'</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">trim</div>
            <div class="fn-sig">(s: String) â†’ String</div>
            <p class="fn-desc">Removes leading and trailing whitespace.</p>
            <div class="fn-example"><code class="example-code">trim('  hi  ')</code><span class="fn-result">â†’ 'hi'</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">concat</div>
            <div class="fn-sig">(a: String, b: String) â†’ String</div>
            <p class="fn-desc">Concatenates two strings (same as <code>+</code>).</p>
            <div class="fn-example"><code class="example-code">concat('hello', ' world')</code><span class="fn-result">â†’ 'hello world'</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">substring</div>
            <div class="fn-sig">(s: String, start: Int, len: Int) â†’ String</div>
            <p class="fn-desc">Extracts a substring starting at <code>start</code> (0-indexed) with length <code>len</code>.</p>
            <div class="fn-example"><code class="example-code">substring('hello', 1, 3)</code><span class="fn-result">â†’ 'ell'</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">indexOf</div>
            <div class="fn-sig">(s: String, sub: String) â†’ Int | NoVal</div>
            <p class="fn-desc">Returns the index of the first occurrence, or <code>NoVal</code> (null) if not found. Use <code>isVal()</code> or <code>orVal()</code> to handle the not-found case.</p>
            <div class="fn-example"><code class="example-code">indexOf('hello', 'l')</code><span class="fn-result">â†’ 2</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">replace</div>
            <div class="fn-sig">(s: String, search: String, repl: String) â†’ String</div>
            <p class="fn-desc">Replaces the first occurrence of <code>search</code> with <code>repl</code>.</p>
            <div class="fn-example"><code class="example-code">replace('abab', 'ab', 'x')</code><span class="fn-result">â†’ 'xab'</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">replaceAll</div>
            <div class="fn-sig">(s: String, search: String, repl: String) â†’ String</div>
            <p class="fn-desc">Replaces all occurrences of <code>search</code> with <code>repl</code>.</p>
            <div class="fn-example"><code class="example-code">replaceAll('abab', 'ab', 'x')</code><span class="fn-result">â†’ 'xx'</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">startsWith</div>
            <div class="fn-sig">(s: String, prefix: String) â†’ Bool</div>
            <p class="fn-desc">Returns true if the string starts with the given prefix.</p>
            <div class="fn-example"><code class="example-code">startsWith('hello', 'he')</code><span class="fn-result">â†’ true</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">endsWith</div>
            <div class="fn-sig">(s: String, suffix: String) â†’ Bool</div>
            <p class="fn-desc">Returns true if the string ends with the given suffix.</p>
            <div class="fn-example"><code class="example-code">endsWith('hello', 'lo')</code><span class="fn-result">â†’ true</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">contains</div>
            <div class="fn-sig">(s: String, sub: String) â†’ Bool</div>
            <p class="fn-desc">Returns true if the string contains the given substring.</p>
            <div class="fn-example"><code class="example-code">contains('hello', 'ell')</code><span class="fn-result">â†’ true</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">isEmpty</div>
            <div class="fn-sig">(s: String) â†’ Bool</div>
            <p class="fn-desc">Returns true if the string is empty (length 0).</p>
            <div class="fn-example"><code class="example-code">isEmpty('')</code><span class="fn-result">â†’ true</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">padStart</div>
            <div class="fn-sig">(s: String, len: Int, pad: String) â†’ String</div>
            <p class="fn-desc">Pads the start of the string to reach the target length.</p>
            <div class="fn-example"><code class="example-code">padStart('42', 5, '0')</code><span class="fn-result">â†’ '00042'</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">padEnd</div>
            <div class="fn-sig">(s: String, len: Int, pad: String) â†’ String</div>
            <p class="fn-desc">Pads the end of the string to reach the target length.</p>
            <div class="fn-example"><code class="example-code">padEnd('hi', 5, '.')</code><span class="fn-result">â†’ 'hi...'</span></div>
          </div>
        </div>
      </section>

      <section class="stdlib-section" id="stdlib-introspection" data-stdlib-search-target="section">
        <h2>Type Introspection & Null Handling</h2>
        <p>Functions to inspect types and handle null values safely. Elo has no null literal, but can receive null values from external sources. See <a href="#doc/types" data-action="click->tabs#switch" data-tab="doc">Types</a> in the language reference.</p>

        <div class="stdlib-grid" data-stdlib-search-target="grid">
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">typeOf</div>
            <div class="fn-sig">(value: Any) â†’ String</div>
            <p class="fn-desc">Returns the type name of the value. Returns <code>'NoVal'</code> for null/undefined/nil.</p>
            <div class="fn-example"><code class="example-code">typeOf(42)</code><span class="fn-result">â†’ 'Int'</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">isVal</div>
            <div class="fn-sig">(value: Any) â†’ Bool</div>
            <p class="fn-desc">Returns <code>true</code> if the value is not null/undefined/nil. Use to check if external values exist.</p>
            <div class="fn-example"><code class="example-code">isVal(42)</code><span class="fn-result">â†’ true</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">orVal</div>
            <div class="fn-sig">(value: Any, default: Any) â†’ Any</div>
            <p class="fn-desc">Returns the value if it's not null, otherwise returns the default. Like <code>??</code> in JavaScript or <code>COALESCE</code> in SQL.</p>
            <div class="fn-example"><code class="example-code">orVal(42, 0)</code><span class="fn-result">â†’ 42</span></div>
          </div>
        </div>
      </section>

      <section class="stdlib-section" id="stdlib-type-selectors" data-stdlib-search-target="section">
        <h2>Type Selectors</h2>
        <p>Type selectors parse strings to typed values. They return <code>NoVal</code> on invalid input, making them safe to use with the <code>|</code> alternative operator for defaults.</p>

        <div class="stdlib-grid" data-stdlib-search-target="grid">
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">Int</div>
            <div class="fn-sig">(value: String | Int | Float) â†’ Int | NoVal</div>
            <p class="fn-desc">Parses a string to an integer. Returns the value unchanged if already an Int, truncates Floats.</p>
            <div class="fn-example"><code class="example-code">Int('123')</code><span class="fn-result">â†’ 123</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">Float</div>
            <div class="fn-sig">(value: String | Int | Float) â†’ Float | NoVal</div>
            <p class="fn-desc">Parses a string to a floating-point number. Returns the value unchanged if already numeric.</p>
            <div class="fn-example"><code class="example-code">Float('3.14')</code><span class="fn-result">â†’ 3.14</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">Bool</div>
            <div class="fn-sig">(value: String | Bool) â†’ Bool | NoVal</div>
            <p class="fn-desc">Parses <code>'true'</code> or <code>'false'</code> strings to boolean. Returns <code>NoVal</code> for other strings.</p>
            <div class="fn-example"><code class="example-code">Bool('true')</code><span class="fn-result">â†’ true</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">Date</div>
            <div class="fn-sig">(value: String | Date) â†’ Date | NoVal</div>
            <p class="fn-desc">Parses an ISO date string (YYYY-MM-DD) to a Date. Returns <code>NoVal</code> for invalid formats.</p>
            <div class="fn-example"><code class="example-code">Date('2025-01-15')</code><span class="fn-result">â†’ D2025-01-15</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">Datetime</div>
            <div class="fn-sig">(value: String | DateTime) â†’ DateTime | NoVal</div>
            <p class="fn-desc">Parses an ISO datetime string to a DateTime. Returns <code>NoVal</code> for invalid formats.</p>
            <div class="fn-example"><code class="example-code">Datetime('2025-01-15T10:30:00')</code><span class="fn-result">â†’ D2025-01-15T10:30:00</span></div>
          </div>

          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">Duration</div>
            <div class="fn-sig">(value: String | Duration) â†’ Duration | NoVal</div>
            <p class="fn-desc">Parses an ISO 8601 duration string. Returns <code>NoVal</code> for invalid formats.</p>
            <div class="fn-example"><code class="example-code">Duration('P1D')</code><span class="fn-result">â†’ P1D</span></div>
          </div>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Type Selectors with Defaults</div>
          <pre class="example-code">Int('abc') | 0</pre>
          <p class="example-desc">Use the <code>|</code> operator to provide a default when parsing fails.</p>
        </div>
      </section>

      <footer class="stdlib-footer">
        <p>
          Elo is open-source under the MIT License
          <br>
          <a href="https://github.com/enspirit/elo" target="_blank">View on GitHub</a> Â·
          <a href="https://enspirit.dev" target="_blank">Enspirit</a> Â·
          <a href="https://klaro.cards" target="_blank">Klaro Cards</a>
        </p>
      </footer>
    </article>
  </main>

  <!-- Blog Panel -->
  <main data-tabs-target="panel" data-panel="blog" class="blog-panel hidden" data-controller="blog">
    <article class="blog-content">
      <header class="page-header centered">
        <h1>Blog</h1>
        <p class="page-intro">Stories, insights, and lessons from building Elo</p>
      </header>

      <article class="blog-post" id="day-two-refinement" data-blog-target="post">
        <header class="post-header" data-action="click->blog#toggle">
          <h2>Day Two: The Art of Refinement</h2>
          <div class="post-meta">
            <time datetime="2024-12-26">December 26, 2024</time>
            <span class="post-author">By Bernard Lambeau & Claude</span>
          </div>
        </header>

        <div class="post-content">
          <p class="lead">
            Day one was about building something from nothing. Day two was differentâ€”it was about refinement, rebranding, and preparing Elo for the world. From debugging generated code to creating an About page with GitHub Sponsors, here's what the second day of human-AI collaboration looked like.
          </p>

          <h3>The Morning Revelation</h3>
          <p>
            We started day two by looking at what we'd built. The compiler worked. Tests passed. But something felt off about the generated code. Take this simple Elo expression:
          </p>
          <blockquote>
            <code>let x = 1 in x + 1</code>
          </blockquote>
          <p>
            The JavaScript output looked like this:
          </p>
          <pre><code>((x) => x + 1)(1)</code></pre>
          <p>
            Technically correct. But when debugging generated code, this IIFE-wrapped style is nearly impossible to follow. Bernard's task file was characteristically direct:
          </p>
          <blockquote>
            "The current implementation relies on lambda calls. While semantically correct, it's extremely difficult to debug generated code by inspection. How can we fix that?"
          </blockquote>
          <p>
            The new output? Clean, readable imperative code:
          </p>
          <pre><code>(function() { let x = 1; return x + 1; })()</code></pre>

          <h3>Error Handling: A Finitio Inheritance</h3>
          <p>
            The biggest feature of day two was error handlingâ€”but not the usual try/catch kind. Elo needed something portable across Ruby, JavaScript, and SQL.
          </p>
          <p>
            Bernard brought Finitio's influence: instead of exceptions, we designed an <strong>alternative operator</strong>. The <code>|</code> symbol means "try this, or else try that":
          </p>
          <pre><code>Date&lt;iso8601&gt;(input) | Date&lt;dmy&gt;(input) | fail("Invalid date")</code></pre>
          <p>
            This compiles to:
          </p>
          <ul>
            <li><strong>JavaScript:</strong> A try/catch chain that falls through alternatives</li>
            <li><strong>Ruby:</strong> begin/rescue blocks with fallback semantics</li>
            <li><strong>SQL:</strong> <code>COALESCE()</code>â€”elegant and native</li>
          </ul>
          <p>
            The design session was illuminating. We considered tagged NoVal values, exception accumulation, and various operator syntaxes. The final choiceâ€”<code>|</code> inspired by Finitio's union typesâ€”emerged from exploring how each target language handles optionality.
          </p>

          <h3>Type Selectors: Information Contracts Come to Elo</h3>
          <p>
            A long-planned feature finally landed: <strong>type selectors</strong>. In Finitio terms, these are "information contracts"â€”ways to coerce raw data into typed values:
          </p>
          <pre><code>Date("2024-12-26")           // String â†’ Date
Int("42")                    // String â†’ Int
Date&lt;iso8601&gt;(jsonValue)     // Explicit contract</code></pre>
          <p>
            The invariant is simple: <code>typeOf(Date(x)) == 'Date'</code>â€”always. If the conversion fails, it throws. This gives Elo a clean way to handle data from JSON APIs or user input, without dozens of parsing functions.
          </p>

          <h3>Syntactic Sugar: Small Things Matter</h3>
          <p>
            Several hours went into features that might seem trivial:
          </p>
          <ul>
            <li><strong>Parameterless lambdas:</strong> <code>fn(~&gt; 42)</code> instead of requiring a dummy parameter</li>
            <li><strong>Immediate invocation:</strong> <code>fn(~&gt; 42)()</code>â€”create and call in one expression</li>
            <li><strong>Optional parentheses in pipes:</strong> <code>x |&gt; upcase</code> instead of <code>x |&gt; upcase()</code></li>
          </ul>
          <p>
            These aren't core features. They're ergonomics. But ergonomics is what separates a language people use from one they merely tolerate. The pipe syntax in particular now reads like Elixir:
          </p>
          <pre><code>"hello" |> upcase |> reverse   // "OLLEH"</code></pre>

          <h3>Self-Enforcing Quality</h3>
          <p>
            One pattern emerged that's worth highlighting: <strong>using tests to constrain the AI</strong>.
          </p>
          <p>
            Bernard noticed that test files weren't always effectiveâ€”Claude would sometimes write <code>.elo</code> fixture files with expressions but no assertions. The test would pass (the code compiled), but nothing was actually verified.
          </p>
          <p>
            The solution? Add a meta-test:
          </p>
          <blockquote>
            "Add an integration test that checks that all .elo files have an <code>assert</code> call on every line."
          </blockquote>
          <p>
            Now the test suite enforces its own quality. Every fixture file must contain assertions, or CI fails. Claude learns this constraint implicitly by running the tests.
          </p>

          <h3>Polishing the Interface</h3>
          <p>
            Day two also focused on user-facing polish:
          </p>
          <ul>
            <li>The CLI gained <strong>stdin support</strong>: <code>echo "2+3" | eloc -</code></li>
            <li>Documentation expanded with a <strong>Command Line</strong> section</li>
            <li>The README now covers the full <code>eloc</code> interface</li>
          </ul>
          <p>
            None of this is glamorous. But it's what makes a tool usable. A compiler that can't read from a pipe is a compiler you can't integrate into shell scripts.
          </p>

          <h3>From K to Elo: The Rebranding</h3>
          <p>
            The language started as "K"â€”a terrible name, already taken by a famous array language. Day two brought a complete rebranding:
          </p>
          <ul>
            <li><strong>New name:</strong> Elo (named after Elodieâ€”a reminder that life is more than code)</li>
            <li><strong>New extension:</strong> <code>.elo</code> files instead of <code>.k</code></li>
            <li><strong>New CLI:</strong> <code>eloc</code> (the Elo compiler)</li>
            <li><strong>Domain check:</strong> elo-lang.org available, @enspirit/elo on npm</li>
          </ul>
          <p>
            Naming matters. A language with an unusable name is a language that won't spread.
          </p>

          <h3>Building the About Page</h3>
          <p>
            If Elo is useful to others, they should know who built it and how to support the work. We created a complete About section:
          </p>
          <ul>
            <li><strong>Who's behind Elo:</strong> Bernard's background, Enspirit, 25 years of software engineering &amp; language design</li>
            <li><strong>Related work:</strong> Finitio, Bmg, Webspicy, Klaro Cardsâ€”showing the ecosystem</li>
            <li><strong>Support options:</strong> Hire Enspirit, use Klaro Cards, GitHub Sponsors</li>
            <li><strong>The dedication:</strong> A tribute section reminding us that music competes with code</li>
          </ul>
          <p>
            Open source isn't just code. It's building trust, showing credentials, and creating paths for sustainability.
          </p>

          <h3>Lessons from Day Two</h3>
          <p>
            The dynamics shifted from day one. Less exploration, more refinement:
          </p>
          <ul>
            <li><strong>Readability over cleverness</strong> â€” Clever lambda-based compilation was replaced with straightforward imperative code. Debugging wins over elegance.</li>
            <li><strong>Design constraints from related work</strong> â€” Finitio's influence guided error handling and type selectors. Prior experience accelerates good design.</li>
            <li><strong>Meta-tests enforce discipline</strong> â€” Tests that verify test quality create self-improving systems.</li>
            <li><strong>Polish matters</strong> â€” Stdin support, CLI docs, pipe syntaxâ€”small improvements compound into a professional tool.</li>
            <li><strong>The AI adapts to constraints</strong> â€” When the test suite rejects certain patterns (missing asserts), Claude learns to avoid them. Structure shapes behavior.</li>
          </ul>

          <h3>What Tomorrow Holds</h3>
          <p>
            Looking at our todo list, the future holds Finitio-like dressing featuresâ€”using Elo's type selectors to parse structured data from JSON. The foundation is in place. The alternative operator handles failures. Type selectors do the parsing.
          </p>
          <p>
            Day one was a sprint. Day two was a refinement. Day three? We'll see what ideas the morning brings.
          </p>
        </div>

        <footer class="post-footer">
          <p>
            View today's task files: <a href="https://github.com/enspirit/elo/tree/main/.claude/tasks/done" target="_blank">Done tasks on GitHub</a>.
          </p>
        </footer>
      </article>

      <article class="blog-post" id="building-k-with-claude" data-blog-target="post">
        <header class="post-header" data-action="click->blog#toggle">
          <h2>Building Elo: A Human-AI Collaboration Story</h2>
          <div class="post-meta">
            <time datetime="2024-12-25">December 25, 2024</time>
            <span class="post-author">By Bernard Lambeau & Claude</span>
          </div>
        </header>

        <div class="post-content">
          <p class="lead">
            Elo was built in a single day through an intense collaboration between a human developer and Claude Code. Here's what we learned about making AI pair programming actually work.
          </p>

          <h3>The Starting Point</h3>
          <p>
            It began with a nearly empty directory: just a README with an idea. Bernard had a clear visionâ€”a small expression language that could compile to Ruby, JavaScript, and SQLâ€”but no code. The first prompt was simple:
          </p>
          <blockquote>
            "Read README. I want to invent a small language that compiles to Ruby, Javascript and SQL. Let's start with arithmetic expressions involving scalars and (open) variables."
          </blockquote>
          <p>
            From there, we built incrementally: first arithmetic, then booleans, then temporal types with ISO 8601 durations, then a type system, a standard library, conditionals, lambdas, objects, and finally this website you're reading.
          </p>

          <h3>What Worked: The Task File Pattern</h3>
          <p>
            The most effective pattern we discovered was the <strong>task file</strong>. Before each significant change, Bernard would write a short markdown file describing:
          </p>
          <ul>
            <li><strong>The problem to solve</strong> â€” what's wrong or missing</li>
            <li><strong>The idea</strong> â€” a rough direction, not a specification</li>
            <li><strong>Post-implementation discussion</strong> â€” follow-up refinements after seeing results</li>
          </ul>
          <p>
            This structure let Claude understand not just <em>what</em> to build, but <em>why</em>. When Claude understood the underlying goal, it could make better design decisions and propose alternatives.
          </p>

          <h3>Vision vs. Execution</h3>
          <p>
            A clear division of labor emerged naturally:
          </p>
          <ul>
            <li><strong>Bernard</strong> provided the vision, domain expertise (NoCode tools, existing libraries like Finitio and Bmg), design principles (simple, portable, safe), and course corrections</li>
            <li><strong>Claude</strong> handled implementation details, proposed architectural solutions, wrote the code, and maintained test coverage</li>
          </ul>
          <p>
            <strong>Here's the remarkable part: Bernard didn't write a single line of code.</strong> Not one. He wrote specifications in markdown files, reviewed outputs, and provided feedbackâ€”but never touched the TypeScript, never adjusted a compiler, never fixed a failing test himself. When something wasn't right, he described what was wrong and let Claude fix it. It worked.
          </p>
          <p>
            When Bernard asked "What should be our next step?", Claude could analyze the codebase and propose pragmatic priorities. When Claude proposed something overly complex, Bernard would push back: "Let's keep it simple."
          </p>

          <h3>The Power of Constraints</h3>
          <p>
            Elo's design principlesâ€”simple, well-designed, portable, safeâ€”weren't just marketing. They were active constraints that guided every decision:
          </p>
          <ul>
            <li>Should we add pattern matching? <em>Too complex for NoCode users.</em></li>
            <li>Should lambdas compile to SQL? <em>SQL doesn't support themâ€”skip it.</em></li>
            <li>Should we distinguish <code>==</code> from <code>eql</code>? <em>Noâ€”one equality operator that just works.</em></li>
          </ul>
          <p>
            These constraints made decisions easier. When in doubt, we chose the simpler path.
          </p>

          <h3>Test-Driven Confidence</h3>
          <p>
            From the start, we established three levels of testing:
          </p>
          <ul>
            <li><strong>Unit tests</strong> â€” for parser, AST, and compiler components</li>
            <li><strong>Integration tests</strong> â€” verifying compiled output matches expectations</li>
            <li><strong>Acceptance tests</strong> â€” actually running generated code in Ruby, Node.js, and PostgreSQL</li>
          </ul>
          <p>
            The acceptance tests were crucial. They caught subtle semantic differences between languages and ensured that <code>TODAY + P30D</code> meant exactly the same thing in JavaScript, Ruby, and SQL.
          </p>

          <h3>Iterative Refinement</h3>
          <p>
            Nothing was right the first time. The prelude (runtime helpers) was rewritten twice. The stdlib abstraction evolved from hardcoded patterns to a general dispatch mechanism. The website went through multiple layout iterations.
          </p>
          <p>
            Each task file built on previous work. Task #19 ("Prelude Revisited") explicitly referenced problems discovered in earlier tasks. This iterative approachâ€”ship something, learn from it, improveâ€”worked far better than trying to design everything upfront.
          </p>

          <h3>What We'd Do Again</h3>
          <ul>
            <li><strong>Start with acceptance tests</strong> â€” they define what "correct" means across platforms</li>
            <li><strong>Write task files</strong> â€” they provide context and preserve decisions</li>
            <li><strong>Keep the human in the loop</strong> â€” AI proposes, human disposes</li>
            <li><strong>Embrace constraints</strong> â€” "simple" is a feature, not a limitation</li>
            <li><strong>Build incrementally</strong> â€” each feature in a working state before the next</li>
          </ul>

          <h3>The Result</h3>
          <p>
            In roughly 24 hours of collaboration, we built a complete expression language with a parser, type system, three compilers, a standard library, a CLI tool, and a documentation website. Not bad for a day's work.
          </p>
          <p>
            Elo isn't just a demonstration that AI can write code. It's a demonstration that <strong>humans and AI can build together</strong>â€”each contributing what they do best.
          </p>
        </div>

        <footer class="post-footer">
          <p>
            The complete history of our collaboration is preserved in <a href="https://github.com/enspirit/elo/tree/main/.claude/tasks" target="_blank">the task files on GitHub</a>.
          </p>
        </footer>
      </article>
    </article>

    <footer class="blog-footer">
      <p>
        Elo is open-source under the MIT License
        <br>
        <a href="https://github.com/enspirit/elo" target="_blank">View on GitHub</a> Â·
        <a href="https://enspirit.dev" target="_blank">Enspirit</a> Â·
        <a href="https://klaro.cards" target="_blank">Klaro Cards</a>
      </p>
    </footer>
  </main>

  <!-- About Panel -->
  <main data-tabs-target="panel" data-panel="about" class="about-panel hidden">
    <article class="about-content">
      <header class="page-header centered">
        <h1>About Elo</h1>
        <p class="page-intro">The people, the vision, and how to support this project</p>
      </header>

      <section class="about-section">
        <h2>Who's Behind Elo?</h2>
        <p>
          Elo is created by <strong>Bernard Lambeau</strong>, co-founder of <a href="https://enspirit.dev" target="_blank">Enspirit</a>,
          a Belgian software company specializing in data-driven solutions and No-Code tools.
        </p>
        <p>
          With over 25 years of experience in software engineering, programming language design, and implementation, Bernard has built several
          open-source projects including <a href="https://finitio.io" target="_blank">Finitio</a> (a data validation language),
          <a href="https://www.relational-algebra.dev" target="_blank">Bmg</a> (a relational algebra library), and
          <a href="https://klaro.cards" target="_blank">Klaro Cards</a> (a No-Code platform for data management).
        </p>
        <p>
          Elo emerged from these experiencesâ€”every tool needed a way for users to write simple, safe expressions.
          Instead of reinventing the wheel each time, Elo provides a shared solution that compiles to Ruby, JavaScript, and SQL.
        </p>
      </section>

      <section class="about-section">
        <h2>Related Work</h2>
        <p>Elo builds on years of research and development in expression languages:</p>
        <div class="related-work-grid">
          <div class="related-work-card">
            <h3><a href="https://finitio.io" target="_blank">Finitio</a></h3>
            <p>A data validation language with subtype constraints. Elo could power Finitio's constraint expressions, making them portable across platforms.</p>
          </div>
          <div class="related-work-card">
            <h3><a href="https://www.relational-algebra.dev" target="_blank">Bmg</a></h3>
            <p>A relational algebra library for Ruby. Elo expressions could replace Ruby lambdas in <code>restrict</code> and <code>extend</code> operations, enabling SQL compilation.</p>
          </div>
          <div class="related-work-card">
            <h3><a href="https://github.com/enspirit/webspicy" target="_blank">Webspicy</a></h3>
            <p>An API testing framework. Elo could provide a richer assertion language for validating API responses.</p>
          </div>
          <div class="related-work-card">
            <h3><a href="https://klaro.cards" target="_blank">Klaro Cards</a></h3>
            <p>A No-Code platform for data management. Elo powers computed fields, date filters, and data transformationsâ€”all without users writing code.</p>
          </div>
        </div>
      </section>

      <section class="about-section">
        <h2>Support Elo</h2>
        <p>Elo is open-source and free to use. If you find it valuable, here's how you can support its development:</p>
        <div class="support-grid">
          <div class="support-card">
            <h3>Hire Enspirit</h3>
            <p>Need help with data-driven applications, language design, or No-Code solutions?
              <a href="https://enspirit.dev" target="_blank">Enspirit</a> offers consulting and development services.</p>
          </div>
          <div class="support-card">
            <h3>Use Klaro Cards</h3>
            <p>The best No-Code solution for company process follow-up.
              <a href="https://klaro.cards" target="_blank">Klaro Cards</a> is where Elo gets battle-tested in production.</p>
          </div>
          <div class="support-card">
            <h3>Sponsor</h3>
            <p>Support Elo's development through <a href="https://github.com/sponsors/enspirit" target="_blank">GitHub Sponsors</a>.
              Every contribution helps keep the project alive.</p>
          </div>
        </div>
      </section>

      <section class="about-section tribute-section">
        <h2>Dedication</h2>
        <p>
          Elo is named after <strong>Elodie</strong>â€”a reminder that life is more than code.
        </p>
        <p>
          Software engineering can be all-consuming. The problems are fascinating, the puzzles endless.
          Remember: the best way to get me out of code is music.
        </p>
      </section>

      <footer class="about-footer">
        <p>
          Elo is open-source under the MIT License
          <br>
          <a href="https://github.com/enspirit/elo" target="_blank">View on GitHub</a> Â·
          <a href="https://enspirit.dev" target="_blank">Enspirit</a> Â·
          <a href="https://klaro.cards" target="_blank">Klaro Cards</a>
        </p>
      </footer>
    </article>
  </main>

  <script type="module" src="dist/bundle.js"></script>
</body>
</html>
