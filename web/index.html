<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Try K</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body data-controller="tabs">
  <header>
    <a href="#" class="logo" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="home">K</a>
    <nav>
      <a href="#" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="home" class="active">Home</a>
      <a href="#" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="try">Try</a>
      <a href="#" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="doc">Doc</a>
    </nav>
  </header>

  <!-- Home Panel (Landing Page) -->
  <main data-tabs-target="panel" data-panel="home" class="home-panel" data-controller="doc">
    <div class="home-content">
      <section class="hero">
        <h1>The K Language</h1>
        <p class="tagline">The first programming language entirely designed and implemented by <strong>Claude Code</strong></p>
        <p class="subtitle">A small expression language that compiles to JavaScript, Ruby, and SQL. Write temporal logic once, run it everywhere.</p>
        <a href="#" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="try" class="cta-button">Try it now</a>
      </section>

      <section class="features">
        <div class="feature-card">
          <div class="feature-icon">AI</div>
          <h3>AI-Native Design</h3>
          <p>K was conceived, designed, and implemented entirely by Claude Code. From lexer to compilers, every line emerged from AI-human collaboration.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">3x</div>
          <h3>Write Once, Run Anywhere</h3>
          <p>A single K expression compiles to semantically equivalent JavaScript, Ruby, and SQL. Perfect for full-stack applications.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">T</div>
          <h3>Temporal First</h3>
          <p>First-class support for dates, times, and durations with intuitive syntax. Date arithmetic that actually makes sense.</p>
        </div>
      </section>

      <section class="comparison">
        <h2>Temporal Expressions: K vs JavaScript</h2>
        <p class="comparison-intro">See why K makes temporal logic painless</p>

        <div class="comparison-grid">
          <div class="comparison-example clickable" data-action="click->doc#tryExample">
            <div class="comparison-header">
              <span class="lang-badge k-badge">K</span>
              <span class="comparison-title">Is today within this quarter?</span>
            </div>
            <pre class="comparison-code example-code">TODAY in SOQ..EOQ</pre>
          </div>
          <div class="comparison-example js-example">
            <div class="comparison-header">
              <span class="lang-badge js-badge">JavaScript</span>
              <span class="comparison-title">The same thing...</span>
            </div>
            <pre class="comparison-code">const now = new Date();
const quarter = Math.floor(now.getMonth() / 3);
const startOfQuarter = new Date(
  now.getFullYear(),
  quarter * 3,
  1
);
const endOfQuarter = new Date(
  now.getFullYear(),
  quarter * 3 + 3,
  0,
  23, 59, 59, 999
);
now >= startOfQuarter && now <= endOfQuarter;</pre>
          </div>
        </div>

        <div class="comparison-grid">
          <div class="comparison-example clickable" data-action="click->doc#tryExample">
            <div class="comparison-header">
              <span class="lang-badge k-badge">K</span>
              <span class="comparison-title">30-day trial expiration check</span>
            </div>
            <pre class="comparison-code example-code">let
  signup = D2024-01-15,
  trial = P30D
in
  TODAY > signup + trial</pre>
          </div>
          <div class="comparison-example js-example">
            <div class="comparison-header">
              <span class="lang-badge js-badge">JavaScript</span>
              <span class="comparison-title">The same thing...</span>
            </div>
            <pre class="comparison-code">const signup = new Date('2024-01-15');
const trialDays = 30;
const trialEnd = new Date(signup);
trialEnd.setDate(trialEnd.getDate() + trialDays);
const today = new Date();
today.setHours(0, 0, 0, 0);
today > trialEnd;</pre>
          </div>
        </div>

        <div class="comparison-grid">
          <div class="comparison-example clickable" data-action="click->doc#tryExample">
            <div class="comparison-header">
              <span class="lang-badge k-badge">K</span>
              <span class="comparison-title">Add 1 month and 2 hours to now</span>
            </div>
            <pre class="comparison-code example-code">NOW + P1M + PT2H</pre>
          </div>
          <div class="comparison-example js-example">
            <div class="comparison-header">
              <span class="lang-badge js-badge">JavaScript</span>
              <span class="comparison-title">The same thing...</span>
            </div>
            <pre class="comparison-code">const now = new Date();
const result = new Date(now);
result.setMonth(result.getMonth() + 1);
// But wait, what if the day overflows?
// Jan 31 + 1 month = Feb 31 = March 3rd?
result.setHours(result.getHours() + 2);
result;</pre>
          </div>
        </div>
      </section>

      <section class="targets-section">
        <h2>One Expression, Three Targets</h2>
        <p class="targets-intro">K compiles to idiomatic code in each target language</p>

        <div class="targets-demo">
          <div class="target-input clickable" data-action="click->doc#tryExample">
            <span class="lang-badge k-badge">K</span>
            <pre class="example-code">2 ^ 10 > 1000 and TODAY >= SOY</pre>
          </div>
          <div class="targets-output">
            <div class="target-card">
              <span class="lang-badge js-badge">JavaScript</span>
              <pre>Math.pow(2, 10) > 1000 && dayjs().startOf('day') >= dayjs().startOf('year')</pre>
            </div>
            <div class="target-card">
              <span class="lang-badge ruby-badge">Ruby</span>
              <pre>2 ** 10 > 1000 && Date.today >= Date.today.beginning_of_year</pre>
            </div>
            <div class="target-card">
              <span class="lang-badge sql-badge">SQL</span>
              <pre>POWER(2, 10) > 1000 AND CURRENT_DATE >= DATE_TRUNC('year', CURRENT_DATE)</pre>
            </div>
          </div>
        </div>
      </section>

      <section class="cta-section">
        <h2>Ready to try K?</h2>
        <p>Jump into the playground and start writing temporal expressions that just work.</p>
        <a href="#" data-tabs-target="tab" data-action="click->tabs#switch" data-tab="try" class="cta-button">Open Playground</a>
      </section>

      <footer class="home-footer">
        <p>
          K is an open-source project created with Claude Code
          <br>
          <a href="https://github.com/klang-lang/klang" target="_blank">View on GitHub</a>
        </p>
      </footer>
    </div>
  </main>

  <!-- Try Panel (Playground) -->
  <main data-tabs-target="panel" data-panel="try" data-controller="playground" class="hidden">
    <section class="editor-panel">
      <textarea
        data-playground-target="input"
        data-action="input->playground#compile"
        placeholder="Write K code here..."
        spellcheck="false"
      >let x = 12, y = 13 in assert(x + y == 25)</textarea>
    </section>

    <section class="output-panel">
      <div class="panel-header">
        <select
          data-playground-target="language"
          data-action="change->playground#compile"
        >
          <option value="javascript">JavaScript</option>
          <option value="ruby">Ruby</option>
          <option value="sql">SQL</option>
        </select>
        <select
          data-playground-target="mode"
          data-action="change->playground#compile"
        >
          <option value="production">Production</option>
          <option value="testable">Testable</option>
        </select>
        <label class="checkbox-label">
          <input
            type="checkbox"
            data-playground-target="prelude"
            data-action="change->playground#compile"
          />
          Prelude
        </label>
        <button
          data-playground-target="runButton"
          data-action="click->playground#run"
          class="run-button"
        >Run</button>
      </div>
      <pre data-playground-target="output"></pre>
      <div class="result" data-playground-target="result"></div>
      <div class="error" data-playground-target="error"></div>
    </section>
  </main>

  <!-- Doc Panel -->
  <main data-tabs-target="panel" data-panel="doc" class="doc-panel hidden" data-controller="doc">
    <article class="doc-content">
      <h1>The K Language</h1>
      <p class="intro">
        K is a small expression language that compiles to <strong>JavaScript</strong>,
        <strong>Ruby</strong>, and <strong>SQL</strong>. Write once, run anywhere.
      </p>

      <section class="doc-section">
        <h2>Getting Started</h2>
        <p>
          K expressions compile to equivalent code in all three target languages.
          Click any example to try it in the playground.
        </p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Hello, Math!</div>
          <pre class="example-code">2 + 3 * 4</pre>
          <p class="example-desc">Basic arithmetic follows standard precedence rules.</p>
        </div>
      </section>

      <section class="doc-section">
        <h2>Arithmetic</h2>
        <p>K supports the usual arithmetic operators, plus a power operator.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Basic Operations</div>
          <pre class="example-code">(10 + 5) * 2 - 8 / 4</pre>
          <p class="example-desc">Addition, subtraction, multiplication, and division.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Power Operator</div>
          <pre class="example-code">2 ^ 10</pre>
          <p class="example-desc">
            Compiles to <code>Math.pow()</code> in JS, <code>**</code> in Ruby,
            and <code>POWER()</code> in SQL.
          </p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Modulo</div>
          <pre class="example-code">17 % 5</pre>
          <p class="example-desc">The remainder operator works across all targets.</p>
        </div>
      </section>

      <section class="doc-section">
        <h2>Strings</h2>
        <p>K supports single-quoted string literals.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">String Literal</div>
          <pre class="example-code">'hello world'</pre>
          <p class="example-desc">Simple strings use single quotes.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">String Comparison</div>
          <pre class="example-code">assert('hello' == 'hello')</pre>
          <p class="example-desc">Compare strings with <code>==</code> and <code>!=</code>.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Escaped Quotes</div>
          <pre class="example-code">'it\'s working'</pre>
          <p class="example-desc">Escape single quotes with backslash.</p>
        </div>
      </section>

      <section class="doc-section">
        <h2>Comparisons &amp; Booleans</h2>
        <p>Compare values and combine conditions with logical operators.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Comparison Operators</div>
          <pre class="example-code">10 > 5 and 3 <= 3</pre>
          <p class="example-desc">Use <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>==</code>, <code>!=</code>.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Logical Operators</div>
          <pre class="example-code">true and false or not false</pre>
          <p class="example-desc">Combine booleans with <code>and</code>, <code>or</code>, and <code>not</code>.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Complex Conditions</div>
          <pre class="example-code">(5 > 3 and 2 < 4) or not (1 == 2)</pre>
          <p class="example-desc">Group conditions with parentheses.</p>
        </div>
      </section>

      <section class="doc-section">
        <h2>Local Variables</h2>
        <p>Use <code>let ... in</code> expressions to bind local variables.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Simple Binding</div>
          <pre class="example-code">let x = 10 in x * 2</pre>
          <p class="example-desc">Bind a value to a name, then use it in an expression.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Multiple Bindings</div>
          <pre class="example-code">let width = 5, height = 3 in width * height</pre>
          <p class="example-desc">Bind multiple variables separated by commas.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Nested Let</div>
          <pre class="example-code">let a = 2 in let b = a * 3 in b + 1</pre>
          <p class="example-desc">Variables can reference earlier bindings.</p>
        </div>
      </section>

      <section class="doc-section">
        <h2>Dates &amp; Times</h2>
        <p>K has first-class support for temporal values with intuitive literals.</p>

        <h3>Date &amp; Time Literals</h3>
        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Date Literal</div>
          <pre class="example-code">D2025-12-25</pre>
          <p class="example-desc">ISO date format with <code>D</code> prefix.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">DateTime Literal</div>
          <pre class="example-code">T2025-12-31T23:59:59</pre>
          <p class="example-desc">Full timestamp with <code>T</code> prefix.</p>
        </div>

        <h3>Temporal Keywords</h3>
        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">NOW and TODAY</div>
          <pre class="example-code">TODAY &lt; NOW</pre>
          <p class="example-desc">
            <code>NOW</code> is the current timestamp, <code>TODAY</code> is midnight today.
          </p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Period Boundaries</div>
          <pre class="example-code">SOY &lt;= TODAY and TODAY &lt;= EOY</pre>
          <p class="example-desc">
            Start/End of Year (<code>SOY</code>/<code>EOY</code>), Quarter (<code>SOQ</code>/<code>EOQ</code>),
            Month (<code>SOM</code>/<code>EOM</code>), Week (<code>SOW</code>/<code>EOW</code>).
          </p>
        </div>
      </section>

      <section class="doc-section">
        <h2>Durations</h2>
        <p>Express time spans using ISO 8601 duration syntax.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Duration Literal</div>
          <pre class="example-code">P1Y2M3D</pre>
          <p class="example-desc">1 year, 2 months, 3 days. Use <code>P</code> prefix.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Time Durations</div>
          <pre class="example-code">PT2H30M</pre>
          <p class="example-desc">2 hours and 30 minutes.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Date Arithmetic</div>
          <pre class="example-code">TODAY + P7D</pre>
          <p class="example-desc">Add 7 days to today. Works with all temporal values.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Complex Duration</div>
          <pre class="example-code">NOW - P1M + PT2H30M</pre>
          <p class="example-desc">One month ago, plus 2.5 hours.</p>
        </div>
      </section>

      <section class="doc-section">
        <h2>Assertions</h2>
        <p>Use <code>assert()</code> to validate conditions at runtime.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Simple Assert</div>
          <pre class="example-code">assert(2 + 2 == 4)</pre>
          <p class="example-desc">Throws an error if the condition is false.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Assert with Let</div>
          <pre class="example-code">let price = 100, tax = 0.2 in assert(price * (1 + tax) == 120)</pre>
          <p class="example-desc">Combine assertions with local variables for readable tests.</p>
        </div>
      </section>

      <section class="doc-section">
        <h2>Range Membership</h2>
        <p>Check if a value falls within a range using the <code>in</code> operator.</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Inclusive Range</div>
          <pre class="example-code">5 in 1..10</pre>
          <p class="example-desc">True if 5 &gt;= 1 AND 5 &lt;= 10. Both ends are included.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Exclusive End Range</div>
          <pre class="example-code">5 in 1...10</pre>
          <p class="example-desc">True if 5 &gt;= 1 AND 5 &lt; 10. End is excluded (Ruby-style).</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Negated Range</div>
          <pre class="example-code">11 not in 1..10</pre>
          <p class="example-desc">True if value is outside the range. Reads naturally!</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Date Range Check</div>
          <pre class="example-code">TODAY in SOY..EOY</pre>
          <p class="example-desc">Check if today is within the current year.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Combined Ranges</div>
          <pre class="example-code">x in 0..100 and y in 0..100</pre>
          <p class="example-desc">Multiple range checks with <code>and</code>/<code>or</code> keywords.</p>
        </div>
      </section>

      <section class="doc-section">
        <h2>Compilation Modes</h2>
        <p>K supports two compilation modes for temporal expressions:</p>

        <h3>Production Mode (default)</h3>
        <p>
          Uses native temporal functions: <code>dayjs()</code> in JavaScript,
          <code>DateTime.now</code> in Ruby, <code>CURRENT_TIMESTAMP</code> in SQL.
        </p>

        <h3>Testable Mode</h3>
        <p>
          Uses injectable functions (<code>klang.now()</code>, <code>Klang.now</code>, <code>klang_now()</code>)
          that can be mocked for deterministic testing. Set the <code>KLANG_NOW</code> environment variable
          to freeze time.
        </p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Try Both Modes</div>
          <pre class="example-code">NOW &gt;= TODAY</pre>
          <p class="example-desc">Toggle between Production and Testable mode to see the difference.</p>
        </div>
      </section>

      <section class="doc-section">
        <h2>Real-World Example</h2>
        <p>Putting it all together:</p>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Subscription Check</div>
          <pre class="example-code">let
  signup_date = D2024-01-15,
  trial_period = P30D,
  trial_end = signup_date + trial_period
in
  assert(TODAY > trial_end)</pre>
          <p class="example-desc">Check if a 30-day trial has expired.</p>
        </div>

        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Quarterly Report Window</div>
          <pre class="example-code">let
  report_due = EOQ + P5D,
  days_left = report_due - TODAY
in
  TODAY &lt;= report_due</pre>
          <p class="example-desc">Reports are due 5 days after end of quarter.</p>
        </div>
      </section>

      <footer class="doc-footer">
        <p>
          K compiles to semantically equivalent code in JavaScript, Ruby, and SQL.
          <br>
          <a href="https://github.com/klang-lang/klang" target="_blank">View on GitHub</a>
        </p>
      </footer>
    </article>
  </main>

  <script type="module" src="dist/bundle.js"></script>
</body>
</html>
