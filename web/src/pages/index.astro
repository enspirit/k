---
import Layout from '../layouts/Layout.astro';
import Footer from '../components/Footer.astro';

const base = import.meta.env.BASE_URL.replace(/\/$/, '');
const url = (path: string) => `${base}${path}`;
---

<Layout activeNav="home">
  <main class="home-panel" data-controller="doc">
    <div class="home-content">
      <section class="hero">
        <div class="hero-logo">
          <svg class="hero-logo-icon" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="8" y="10" width="20" height="5" rx="2.5" fill="currentColor"/>
            <rect x="8" y="21.5" width="28" height="5" rx="2.5" fill="currentColor"/>
            <rect x="8" y="33" width="20" height="5" rx="2.5" fill="currentColor"/>
            <path d="M36 24L42 28V20L36 24Z" fill="currentColor"/>
          </svg>
        </div>
        <h1>The Elo Language</h1>
        <p class="tagline">A simple, well-designed, portable, and safe data expression language</p>
        <p class="subtitle">Elo compiles to JavaScript, Ruby, and SQL. Built for No-Code tools where non-technical users need to manipulate data easily and safely.</p>
        <div class="cta-buttons">
          <a href={url('/try')} class="cta-button">Try it now</a>
          <a href={url('/reference#get-started')} class="cta-button cta-secondary">Get started</a>
        </div>
      </section>

      <section class="features">
        <div class="feature-card">
          <div class="feature-icon">=</div>
          <h3>Simple by Design</h3>
          <p>A pure data language: everything is a value, no reference semantics, no <code>new</code>. One equality operator that just works. Designed to be safe for non-technical users.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">3x</div>
          <h3>Truly Portable</h3>
          <p>One expression compiles to semantically equivalent JavaScript, Ruby, and SQL. Frontend, backend, and database all speak the same data language.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">{`{}`}</div>
          <h3>Built for Real Data</h3>
          <p>First-class dates, times, and durations with intuitive syntax. Data schemas that validate and coerce input. Business logic that just works, everywhere.</p>
        </div>
      </section>

      <section class="unique-features">
        <h2>What Makes Elo Different</h2>
        <p class="unique-intro">Built for real-world data problems, Elo brings powerful features in a simple syntax</p>

        <div class="unique-grid">
          <div class="unique-example clickable" data-action="click->doc#tryExample">
            <pre class="example-code">let
  signup = D2024-06-15
in
  TODAY > signup + P30D</pre>
          </div>
          <div class="unique-explain">
            <h4>First-Class Dates &amp; Durations</h4>
            <p>Dates, times, and durations are native types with intuitive literal syntax. Add 30 days to a date? Just write <code>+ P30D</code>. No parsing, no conversion, no library imports.</p>
          </div>
        </div>

        <div class="unique-grid">
          <div class="unique-example clickable" data-action="click->doc#tryExample" data-input='{"name": "Conf", "date": "2025-06-15T09:00", "capacity": "100"}'>
            <pre class="example-code">{`let Event = {
  name: String,
  date: Datetime,
  capacity: Int(c | c > 0)
} in _ |> Event`}</pre>
          </div>
          <div class="unique-explain">
            <h4>Data Schemas That Work</h4>
            <p>Turn untrusted input into safe, validated data. Elo coerces and checks everything so your code always runs on data you can trust.</p>
          </div>
        </div>

        <div class="unique-grid">
          <div class="unique-example clickable" data-action="click->doc#tryExample" data-input='[{"price": 50}, {"price": 150}, {"price": 200}]'>
            <pre class="example-code">_
  |> filter(i ~> i.price > 100)
  |> map(i ~> i.price * 1.21)
  |> reduce(0, fn(a, b ~> a + b))</pre>
          </div>
          <div class="unique-explain">
            <h4>Functional &amp; Portable</h4>
            <p>Pipeline operators, lambdas, and a comprehensive <a href={url('/stdlib')}>standard library</a>. Write once, compile to JavaScript, Ruby, and SQLâ€”same semantics everywhere.</p>
          </div>
        </div>

        <div class="unique-grid">
          <div class="unique-example clickable" data-action="click->doc#tryExample" data-input='{"age": 25}'>
            <pre class="example-code">{`guard
  positive: _.age > 0,
  adult: _.age >= 18
in
  'Welcome!'`}</pre>
          </div>
          <div class="unique-explain">
            <h4>Guards for Safe Reasoning</h4>
            <p>Validate assumptions at runtime with labeled guards. Make your logic explicit, fail fast on invalid data, and reason confidently about what your code guarantees.</p>
          </div>
        </div>

        <div class="unique-grid coming-soon">
          <div class="unique-example">
            <pre class="code-preview">{`orders
  |> restrict(o ~> o.status == 'pending')
  |> extend({total: o ~> o.qty * o.price})
  |> project([.customer, .total])`}</pre>
          </div>
          <div class="unique-explain">
            <h4>Coming Soon: Relational Algebra</h4>
            <p>Inspired by Tutorial D and powered by <a href="https://relational-algebra.dev" target="_blank">Bmg</a>, Elo will bring true relational algebra to your data pipelines. Query, join, and aggregateâ€”all with portable semantics.</p>
          </div>
        </div>

        <p class="unique-link">
          See more practical applications in the <a href={url('/learn#usecases-intro')}>Use Cases</a> section.
        </p>
      </section>

      <section class="targets-section">
        <h2>One Expression, Three Targets</h2>
        <p class="targets-intro">Elo compiles to idiomatic code in each target language</p>

        <div class="targets-demo">
          <div class="target-input clickable" data-action="click->doc#tryExample">
            <span class="lang-badge elo-badge">Elo</span>
            <pre class="example-code">2 ^ 10 > 1000 and TODAY >= SOY</pre>
          </div>
          <div class="targets-output">
            <div class="target-card">
              <span class="lang-badge js-badge">JavaScript</span>
              <pre>Math.pow(2, 10) > 1000 && DateTime.now().startOf('day') >= DateTime.now().startOf('year')</pre>
            </div>
            <div class="target-card">
              <span class="lang-badge ruby-badge">Ruby</span>
              <pre>2 ** 10 > 1000 && Date.today >= Date.today.beginning_of_year</pre>
            </div>
            <div class="target-card">
              <span class="lang-badge sql-badge">SQL</span>
              <pre>POWER(2, 10) > 1000 AND CURRENT_DATE >= DATE_TRUNC('year', CURRENT_DATE)</pre>
            </div>
          </div>
        </div>
      </section>

      <section class="cta-section">
        <h2>Ready to try Elo?</h2>
        <p>Jump into the playground and start writing temporal expressions that just work.</p>
        <a href={url('/try')} class="cta-button">Open Playground</a>
      </section>

      <section class="learn-teaser">
        <div class="learn-teaser-content">
          <div class="learn-teaser-icon">ðŸ“š</div>
          <h2>New to Programming?</h2>
          <p>
            Elo is designed to be your friendly first step into coding.
            No scary jargon, no confusing conceptsâ€”just simple ideas explained clearly.
          </p>
          <p class="learn-teaser-highlights">
            Learn about numbers, text, dates, decisions, and moreâ€”at your own pace.
          </p>
          <a href={url('/learn')} class="learn-button">Start Learning â†’</a>
        </div>
      </section>

      <section class="credits-section">
        <h2>Brought to You by</h2>
        <div class="credits-cards">
        <div class="credits-card">
          <div class="credits-avatar human">B</div>
          <div class="credits-info">
            <h3>Bernard Lambeau</h3>
            <p>Designer &amp; Supervisor</p>
            <p class="credits-detail">25 years of language design at <a href="https://enspirit.dev" target="_blank">Enspirit</a></p>
          </div>
        </div>
        <div class="credits-plus">+</div>
        <div class="credits-card">
          <div class="credits-avatar ai">AI</div>
          <div class="credits-info">
            <h3>Claude Code</h3>
            <p>Co-designer &amp; Implementer</p>
            <p class="credits-detail">Every line of code, tests, and docs</p>
          </div>
        </div>
        </div>
      </section>
      <p class="credits-link">
        <a href={url('/about')}>Learn more about the project â†’</a>
      </p>

      <Footer className="home-footer" />
    </div>
  </main>
</Layout>
