---
import Layout from '../layouts/Layout.astro';
import Footer from '../components/Footer.astro';
---

<Layout title="Elo Standard Library" activeNav="stdlib">
  <main class="stdlib-panel" data-controller="doc stdlib-search">
    <aside class="stdlib-toc">
      <nav>
        <a href="#numeric">Numeric</a>
        <a href="#temporal">Temporal</a>
        <a href="#string">String</a>
        <a href="#array">Array</a>
        <a href="#introspection">Introspection</a>
        <a href="#type-selectors">Type Selectors</a>
      </nav>
    </aside>
    <article class="stdlib-content">
      <header class="page-header">
        <h1>Standard Library</h1>
        <p class="page-intro">Built-in functions available in Elo. Click any function to try it in the playground.</p>
        <div class="stdlib-search-bar">
          <input type="text" placeholder="Search functions..." data-stdlib-search-target="input" data-action="input->stdlib-search#filter" />
          <button type="button" class="stdlib-search-clear" data-stdlib-search-target="clearButton" data-action="click->stdlib-search#clear" aria-label="Clear search">&times;</button>
        </div>
      </header>

      <section class="stdlib-section" id="numeric" data-stdlib-search-target="section">
        <h2>Numeric Functions</h2>
        <p>Common mathematical functions for numeric operations.</p>
        <div class="stdlib-grid" data-stdlib-search-target="grid">
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">abs</div>
            <div class="fn-sig">(n: Int | Float) → Int | Float</div>
            <p class="fn-desc">Returns the absolute value of a number.</p>
            <div class="fn-example"><code class="example-code">abs(-5)</code><span class="fn-result">→ 5</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">round</div>
            <div class="fn-sig">(n: Float) → Int</div>
            <p class="fn-desc">Rounds a number to the nearest integer.</p>
            <div class="fn-example"><code class="example-code">round(3.7)</code><span class="fn-result">→ 4</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">floor</div>
            <div class="fn-sig">(n: Float) → Int</div>
            <p class="fn-desc">Rounds a number down to the nearest integer.</p>
            <div class="fn-example"><code class="example-code">floor(3.9)</code><span class="fn-result">→ 3</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">ceil</div>
            <div class="fn-sig">(n: Float) → Int</div>
            <p class="fn-desc">Rounds a number up to the nearest integer.</p>
            <div class="fn-example"><code class="example-code">ceil(3.2)</code><span class="fn-result">→ 4</span></div>
          </div>
        </div>
      </section>

      <section class="stdlib-section" id="temporal" data-stdlib-search-target="section">
        <h2>Temporal Functions</h2>
        <p>Functions to extract components from dates and datetimes.</p>
        <div class="stdlib-grid" data-stdlib-search-target="grid">
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">year</div>
            <div class="fn-sig">(d: Date | DateTime) → Int</div>
            <p class="fn-desc">Extracts the year from a date or datetime.</p>
            <div class="fn-example"><code class="example-code">year(D2024-06-15)</code><span class="fn-result">→ 2024</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">month</div>
            <div class="fn-sig">(d: Date | DateTime) → Int</div>
            <p class="fn-desc">Extracts the month (1-12) from a date or datetime.</p>
            <div class="fn-example"><code class="example-code">month(D2024-06-15)</code><span class="fn-result">→ 6</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">day</div>
            <div class="fn-sig">(d: Date | DateTime) → Int</div>
            <p class="fn-desc">Extracts the day of month (1-31).</p>
            <div class="fn-example"><code class="example-code">day(D2024-06-15)</code><span class="fn-result">→ 15</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">hour</div>
            <div class="fn-sig">(dt: DateTime) → Int</div>
            <p class="fn-desc">Extracts the hour (0-23) from a datetime.</p>
            <div class="fn-example"><code class="example-code">hour(D2024-06-15T14:30:00Z)</code><span class="fn-result">→ 14</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">minute</div>
            <div class="fn-sig">(dt: DateTime) → Int</div>
            <p class="fn-desc">Extracts the minute (0-59) from a datetime.</p>
            <div class="fn-example"><code class="example-code">minute(D2024-06-15T14:30:00Z)</code><span class="fn-result">→ 30</span></div>
          </div>
        </div>
      </section>

      <section class="stdlib-section" id="string" data-stdlib-search-target="section">
        <h2>String Functions</h2>
        <p>A comprehensive set of string manipulation functions.</p>
        <div class="stdlib-grid" data-stdlib-search-target="grid">
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">length</div>
            <div class="fn-sig">(s: String) → Int</div>
            <p class="fn-desc">Returns the number of characters in the string.</p>
            <div class="fn-example"><code class="example-code">length('hello')</code><span class="fn-result">→ 5</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">upper</div>
            <div class="fn-sig">(s: String) → String</div>
            <p class="fn-desc">Converts all characters to uppercase.</p>
            <div class="fn-example"><code class="example-code">upper('hello')</code><span class="fn-result">→ 'HELLO'</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">lower</div>
            <div class="fn-sig">(s: String) → String</div>
            <p class="fn-desc">Converts all characters to lowercase.</p>
            <div class="fn-example"><code class="example-code">lower('HELLO')</code><span class="fn-result">→ 'hello'</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">trim</div>
            <div class="fn-sig">(s: String) → String</div>
            <p class="fn-desc">Removes leading and trailing whitespace.</p>
            <div class="fn-example"><code class="example-code">trim('  hi  ')</code><span class="fn-result">→ 'hi'</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">concat</div>
            <div class="fn-sig">(a: String, b: String) → String</div>
            <p class="fn-desc">Concatenates two strings (same as <code>+</code>).</p>
            <div class="fn-example"><code class="example-code">concat('hello', ' world')</code><span class="fn-result">→ 'hello world'</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">substring</div>
            <div class="fn-sig">(s: String, start: Int, len: Int) → String</div>
            <p class="fn-desc">Extracts a substring starting at <code>start</code> (0-indexed) with length <code>len</code>.</p>
            <div class="fn-example"><code class="example-code">substring('hello', 1, 3)</code><span class="fn-result">→ 'ell'</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">indexOf</div>
            <div class="fn-sig">(s: String, sub: String) → Int | Null</div>
            <p class="fn-desc">Returns the index of the first occurrence, or <code>null</code> if not found.</p>
            <div class="fn-example"><code class="example-code">indexOf('hello', 'l')</code><span class="fn-result">→ 2</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">replace</div>
            <div class="fn-sig">(s: String, search: String, repl: String) → String</div>
            <p class="fn-desc">Replaces the first occurrence of <code>search</code> with <code>repl</code>.</p>
            <div class="fn-example"><code class="example-code">replace('abab', 'ab', 'x')</code><span class="fn-result">→ 'xab'</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">replaceAll</div>
            <div class="fn-sig">(s: String, search: String, repl: String) → String</div>
            <p class="fn-desc">Replaces all occurrences of <code>search</code> with <code>repl</code>.</p>
            <div class="fn-example"><code class="example-code">replaceAll('abab', 'ab', 'x')</code><span class="fn-result">→ 'xx'</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">startsWith</div>
            <div class="fn-sig">(s: String, prefix: String) → Bool</div>
            <p class="fn-desc">Returns true if the string starts with the given prefix.</p>
            <div class="fn-example"><code class="example-code">startsWith('hello', 'he')</code><span class="fn-result">→ true</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">endsWith</div>
            <div class="fn-sig">(s: String, suffix: String) → Bool</div>
            <p class="fn-desc">Returns true if the string ends with the given suffix.</p>
            <div class="fn-example"><code class="example-code">endsWith('hello', 'lo')</code><span class="fn-result">→ true</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">contains</div>
            <div class="fn-sig">(s: String, sub: String) → Bool</div>
            <p class="fn-desc">Returns true if the string contains the given substring.</p>
            <div class="fn-example"><code class="example-code">contains('hello', 'ell')</code><span class="fn-result">→ true</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">isEmpty</div>
            <div class="fn-sig">(s: String) → Bool</div>
            <p class="fn-desc">Returns true if the string is empty.</p>
            <div class="fn-example"><code class="example-code">isEmpty('')</code><span class="fn-result">→ true</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">padStart</div>
            <div class="fn-sig">(s: String, len: Int, pad: String) → String</div>
            <p class="fn-desc">Pads the start of the string to reach the target length.</p>
            <div class="fn-example"><code class="example-code">padStart('42', 5, '0')</code><span class="fn-result">→ '00042'</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">padEnd</div>
            <div class="fn-sig">(s: String, len: Int, pad: String) → String</div>
            <p class="fn-desc">Pads the end of the string to reach the target length.</p>
            <div class="fn-example"><code class="example-code">padEnd('hi', 5, '.')</code><span class="fn-result">→ 'hi...'</span></div>
          </div>
        </div>
      </section>

      <section class="stdlib-section" id="array" data-stdlib-search-target="section">
        <h2>Array Functions</h2>
        <p>Functions for working with arrays.</p>
        <div class="stdlib-grid" data-stdlib-search-target="grid">
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">length</div>
            <div class="fn-sig">(arr: Array) → Int</div>
            <p class="fn-desc">Returns the number of elements in the array.</p>
            <div class="fn-example"><code class="example-code">length([1, 2, 3])</code><span class="fn-result">→ 3</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">at</div>
            <div class="fn-sig">(arr: Array, index: Int) → Any</div>
            <p class="fn-desc">Returns the element at the given index (0-based).</p>
            <div class="fn-example"><code class="example-code">at([1, 2, 3], 1)</code><span class="fn-result">→ 2</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">first</div>
            <div class="fn-sig">(arr: Array) → Any</div>
            <p class="fn-desc">Returns the first element of the array.</p>
            <div class="fn-example"><code class="example-code">first([1, 2, 3])</code><span class="fn-result">→ 1</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">last</div>
            <div class="fn-sig">(arr: Array) → Any</div>
            <p class="fn-desc">Returns the last element of the array.</p>
            <div class="fn-example"><code class="example-code">last([1, 2, 3])</code><span class="fn-result">→ 3</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">isEmpty</div>
            <div class="fn-sig">(arr: Array) → Bool</div>
            <p class="fn-desc">Returns <code>true</code> if the array is empty.</p>
            <div class="fn-example"><code class="example-code">isEmpty([])</code><span class="fn-result">→ true</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">map</div>
            <div class="fn-sig">(arr: Array, fn: Fn) → Array</div>
            <p class="fn-desc">Returns a new array with <code>fn</code> applied to each element. <em>JS/Ruby only.</em></p>
            <div class="fn-example"><code class="example-code">map([1, 2, 3], fn(x ~> x * 2))</code><span class="fn-result">→ [2, 4, 6]</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">filter</div>
            <div class="fn-sig">(arr: Array, predicate: Fn) → Array</div>
            <p class="fn-desc">Returns elements where predicate returns <code>true</code>. <em>JS/Ruby only.</em></p>
            <div class="fn-example"><code class="example-code">filter([1, 2, 3, 4], fn(x | x > 2))</code><span class="fn-result">→ [3, 4]</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">reduce</div>
            <div class="fn-sig">(arr: Array, initial: Any, fn: Fn) → Any</div>
            <p class="fn-desc">Reduces the array to a single value. <em>JS/Ruby only.</em></p>
            <div class="fn-example"><code class="example-code">reduce([1, 2, 3], 0, fn(acc, x ~> acc + x))</code><span class="fn-result">→ 6</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">any</div>
            <div class="fn-sig">(arr: Array, predicate: Fn) → Bool</div>
            <p class="fn-desc">Returns <code>true</code> if any element satisfies predicate. <em>JS/Ruby only.</em></p>
            <div class="fn-example"><code class="example-code">any([1, 2, 3], fn(x | x > 2))</code><span class="fn-result">→ true</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">all</div>
            <div class="fn-sig">(arr: Array, predicate: Fn) → Bool</div>
            <p class="fn-desc">Returns <code>true</code> if all elements satisfy predicate. <em>JS/Ruby only.</em></p>
            <div class="fn-example"><code class="example-code">all([1, 2, 3], fn(x | x > 0))</code><span class="fn-result">→ true</span></div>
          </div>
        </div>
      </section>

      <section class="stdlib-section" id="introspection" data-stdlib-search-target="section">
        <h2>Type Introspection & Null Handling</h2>
        <p>Functions to inspect types and handle null values.</p>
        <div class="stdlib-grid" data-stdlib-search-target="grid">
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">typeOf</div>
            <div class="fn-sig">(value: Any) → String</div>
            <p class="fn-desc">Returns the type name of the value.</p>
            <div class="fn-example"><code class="example-code">typeOf(42)</code><span class="fn-result">→ 'Int'</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">isNull</div>
            <div class="fn-sig">(value: Any) → Bool</div>
            <p class="fn-desc">Returns <code>true</code> if the value is null.</p>
            <div class="fn-example"><code class="example-code">isNull(null)</code><span class="fn-result">→ true</span></div>
          </div>
        </div>
      </section>

      <section class="stdlib-section" id="type-selectors" data-stdlib-search-target="section">
        <h2>Type Selectors</h2>
        <p>Type selectors parse strings to typed values. They return <code>null</code> on invalid input.</p>
        <div class="stdlib-grid" data-stdlib-search-target="grid">
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">Int</div>
            <div class="fn-sig">(value: String | Int | Float) → Int | Null</div>
            <p class="fn-desc">Parses a string to an integer.</p>
            <div class="fn-example"><code class="example-code">Int('123')</code><span class="fn-result">→ 123</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">Float</div>
            <div class="fn-sig">(value: String | Int | Float) → Float | Null</div>
            <p class="fn-desc">Parses a string to a float.</p>
            <div class="fn-example"><code class="example-code">Float('3.14')</code><span class="fn-result">→ 3.14</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">Bool</div>
            <div class="fn-sig">(value: String | Bool) → Bool | Null</div>
            <p class="fn-desc">Parses 'true' or 'false' strings to boolean.</p>
            <div class="fn-example"><code class="example-code">Bool('true')</code><span class="fn-result">→ true</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">Date</div>
            <div class="fn-sig">(value: String | Date) → Date | Null</div>
            <p class="fn-desc">Parses an ISO date string (YYYY-MM-DD) to a Date.</p>
            <div class="fn-example"><code class="example-code">Date('2025-01-15')</code><span class="fn-result">→ D2025-01-15</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">Datetime</div>
            <div class="fn-sig">(value: String | DateTime) → DateTime | Null</div>
            <p class="fn-desc">Parses an ISO datetime string to a DateTime.</p>
            <div class="fn-example"><code class="example-code">Datetime('2025-01-15T10:30:00')</code><span class="fn-result">→ D2025-01-15T10:30:00</span></div>
          </div>
          <div class="stdlib-fn" data-action="click->doc#tryExample">
            <div class="fn-name">Duration</div>
            <div class="fn-sig">(value: String | Duration) → Duration | Null</div>
            <p class="fn-desc">Parses an ISO 8601 duration string.</p>
            <div class="fn-example"><code class="example-code">Duration('P1D')</code><span class="fn-result">→ P1D</span></div>
          </div>
        </div>
        <div class="example" data-action="click->doc#tryExample">
          <div class="example-header">Type Selectors with Defaults</div>
          <pre class="example-code">Int('abc') | 0</pre>
          <p class="example-desc">Use the <code>|</code> operator to provide a default when parsing fails.</p>
        </div>
      </section>

      <Footer className="stdlib-footer" />
    </article>
  </main>
</Layout>
