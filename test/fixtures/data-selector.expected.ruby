(raise "Assertion failed" unless (->(s) { JSON.parse(s, symbolize_names: true) rescue nil }).call("{\"name\": \"Alice\"}") == {name: "Alice"}; true)
(raise "Assertion failed" unless (->(s) { JSON.parse(s, symbolize_names: true) rescue nil }).call("[1, 2, 3]") == [1, 2, 3]; true)
(raise "Assertion failed" unless (->(s) { JSON.parse(s, symbolize_names: true) rescue nil }).call("{\"user\": {\"name\": \"Bob\"}}")[:user][:name] == "Bob"; true)
(raise "Assertion failed" unless (->(s) { JSON.parse(s, symbolize_names: true) rescue nil }).call("{\"active\": true}")[:active] == true; true)
(raise "Assertion failed" unless (->(s) { JSON.parse(s, symbolize_names: true) rescue nil }).call("{\"count\": 42}")[:count] == 42; true)
(raise "Assertion failed" unless [1, 2, 3] == [1, 2, 3]; true)
(raise "Assertion failed" unless {x: 10}[:x] == 10; true)
(raise "Assertion failed" unless ((->(s) { JSON.parse(s, symbolize_names: true) rescue nil }).call("not valid json")).nil?; true)
(raise "Assertion failed" unless ((->(v) { case v when nil; nil when String; JSON.parse(v, symbolize_names: true) rescue nil else v end }).call(nil)).nil?; true)
(raise "Assertion failed" unless ->() { v = (->(s) { JSON.parse(s, symbolize_names: true) rescue nil }).call("invalid"); return v unless v.nil?; {default: true} == {default: true} }.call; true)
