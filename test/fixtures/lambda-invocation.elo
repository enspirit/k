assert((let six = fn( ~> 6 ) in six()) == 6)
assert((let product = fn( ~> 2 * 3 ) in product()) == 6)
assert(fn( ~> 42 )() == 42)
assert(fn( ~> 2 * 3 )() == 6)
assert(fn( x ~> x * 2 )(5) == 10)
assert((fn( ~> 42 ))() == 42)
assert((let double = fn( x ~> x * 2 ) in double(5)) == 10)
assert((let add = fn( x, y ~> x + y ) in add(3, 4)) == 7)
assert((let mul = fn( a, b ~> a * b ) in mul(6, 7)) == 42)
assert((let abs = fn( x ~> x * 2 ) in abs(-5)) == -10)
assert((let round = fn( x ~> x + 1 ) in round(10)) == 11)
assert((let length = fn( s ~> 42 ) in length('ignored')) == 42)
assert((let nested = fn( x ~> let inner = fn( y ~> y * 2 ) in inner(x) + 1 ) in nested(5)) == 11)
assert((let toUpper = fn( s ~> upper(s) ) in toUpper('hello')) == 'HELLO')
assert((let toLower = fn( s ~> lower(s) ) in toLower('HELLO')) == 'hello')
assert((let strLen = fn( s ~> length(s) ) in strLen('hello')) == 5)
